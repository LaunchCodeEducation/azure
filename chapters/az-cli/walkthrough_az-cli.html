<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>8.3. Walkthrough: Provisioning Resources Using the Azure CLI &#8212; Microsoft Azure  documentation</title>
    <link rel="stylesheet" href="../../_static/bootstrap-sphinx.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../../_static/fa/css/all.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/css/launchcode.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/css/site.css" />
    <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <script type="text/javascript" src="../../_static/language_data.js"></script>
    <script type="text/javascript" src="../../_static/js/jquery-1.11.0.min.js"></script>
    <script type="text/javascript" src="../../_static/js/jquery-fix.js"></script>
    <script type="text/javascript" src="../../_static/bootstrap-3.3.7/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="../../_static/bootstrap-sphinx.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="8.4. Exploration: an Automated Deployment Bash Script" href="walkthrough_bash-scripting-automated-deployment.html" />
    <link rel="prev" title="8.2. Azure CLI Practical Fundamentals" href="az-cli-fundamentals.html" />
<meta charset='utf-8'>
<meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1'>
<meta name="apple-mobile-web-app-capable" content="yes">

  </head><body class="body-bc">

<div id="navbar" class="navbar navbar-default navbar-fixed-top">
   <div class="container">
     <div class="navbar-header">
       <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
       <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
         <span class="icon-bar"></span>
         <span class="icon-bar"></span>
         <span class="icon-bar"></span>
       </button>
       <a class="navbar-brand" href="../../index.html"><span><img src="../../_static/lc-ed-logo.png" alt="LaunchCode logo"></span>
       </a>
       <span class="navbar-text navbar-version pull-left"><b></b></span>
     </div>

       <div class="collapse navbar-collapse nav-collapse">
         <ul class="nav navbar-nav">
           
           
             
           
           
           
           
           
         </ul>

         
           
<form class="navbar-form navbar-right" action="../../search.html" method="get">
 <div class="form-group">
    <label for="q" class="searchLabel">Search</label>
    <input type="text" name="q" class="form-control" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
         
       </div>
   </div>
 </div>

<ol class="breadcrumb container">
    <li><a href="../../index.html">Contents</a></li>
    <li><a href="index.html">8. The Azure CLI</a></li>
    <li class="active">8.3. Walkthrough: Provisioning Resources Using the Azure CLI</li>
</ol>



<div class="container">
  <div class="row">
    <div class="col-md-10 col-md-offset-1 content ">

    
  <div class="section" id="walkthrough-provisioning-resources-using-the-azure-cli">
<span id="walkthrough-az-cli"></span><h1>8.3. Walkthrough: Provisioning Resources Using the Azure CLI<a class="headerlink" href="#walkthrough-provisioning-resources-using-the-azure-cli" title="Permalink to this headline">¶</a></h1>
<p>In this walkthrough, we will practice using the <code class="docutils literal notranslate"><span class="pre">az</span> <span class="pre">CLI</span></code> to provision the same resources that we spun up using the web portal GUI. As you work through these commands, try to picture the manual steps you performed on the web portal and use your knowledge of the <code class="docutils literal notranslate"><span class="pre">az</span> <span class="pre">CLI</span></code> patterns to translate those steps into CLI commands.</p>
<p>Although you can simply read through this guide, it is important that you actively attempt each command on your machine. The more practice you get, the more comfortable you will be with using it.</p>
<p>For each resource we provision we will use a methodical approach:</p>
<ul class="simple">
<li><strong>Exploration</strong>: issue a help command to learn about the the resource</li>
<li><strong>Planning</strong>: consider our tasks and which commands, sub-groups and arguments are needed to accomplish them</li>
<li><strong>Provisioning</strong>: put our planning into action and provision the resource</li>
<li><strong>Configuring</strong>: any extra steps that use the new resource to complete our tasks</li>
</ul>
<p>This is a process you can carry with you as you continue to work with the <code class="docutils literal notranslate"><span class="pre">az</span> <span class="pre">CLI</span></code> and other tooling. A good idea is to create a set of notes for easy access to common tasks you are faced with. These notes will prove invaluable when you begin composing commands together into automation scripts.</p>
<div class="admonition">
<p class="first admonition-title"><i class="fas fa-sticky-note" aria-hidden="true"></i>Note</p>
<p class="last">As a cross-platform tool, all of the base commands will work the same on any OS or shell. In some cases, we will utilize shell-specific syntax to accomplish our tasks. Where there are syntactical differences, the commands for both Linux/Bash and Windows/PowerShell will be presented. Otherwise you can freely use the commands in either shell.</p>
</div>
<div class="section" id="setup">
<h2>8.3.1. Setup<a class="headerlink" href="#setup" title="Permalink to this headline">¶</a></h2>
<p>Before we begin, you must to log in with your Azure subscription. The command below will open your browser to enter your credentials. After logging in, you can close the tab and return to your terminal.</p>
<div class="highlight-powershell notranslate"><div class="highlight"><pre><span></span><span class="p">&gt;</span> <span class="n">az</span> <span class="n">login</span>
</pre></div>
</div>
<div class="section" id="configuring-defaults">
<h3>8.3.1.1. Configuring Defaults<a class="headerlink" href="#configuring-defaults" title="Permalink to this headline">¶</a></h3>
<p>Once you are logged in you can make use of the global <code class="docutils literal notranslate"><span class="pre">configure</span></code> command to set defaults for the CLI. This will make working with resources easier by automatically inserting default values for common required arguments. Let’s set a default Azure location for our resources.</p>
<div class="highlight-powershell notranslate"><div class="highlight"><pre><span></span><span class="c"># -d can also be used as a shorthand for --defaults</span>
<span class="p">&gt;</span> <span class="n">az</span> <span class="n">configure</span> <span class="p">-</span><span class="n">-defaults</span> <span class="n">location</span><span class="p">=</span><span class="n">eastus</span>
</pre></div>
</div>
<p>Now, any resource that has a required argument of <code class="docutils literal notranslate"><span class="pre">--location</span></code> or <code class="docutils literal notranslate"><span class="pre">-l</span></code> will automatically have <code class="docutils literal notranslate"><span class="pre">eastus</span></code> set as its value.</p>
<div class="admonition-note admonition">
<p class="first admonition-title"><i class="fas fa-sticky-note" aria-hidden="true"></i>Note</p>
<p>We will use the <code class="docutils literal notranslate"><span class="pre">configure</span></code> command to set defaults for common arguments throughout this walkthrough. You can change your default values at any time by re-issuing the command with new <code class="docutils literal notranslate"><span class="pre">name=value</span></code> pairs. If you set the value as <code class="docutils literal notranslate"><span class="pre">name=''</span></code> (an empty string) it will clear the entry.</p>
<p>You can also view your defaults using the <code class="docutils literal notranslate"><span class="pre">--list-defaults</span></code> argument:</p>
<div class="last highlight-powershell notranslate"><div class="highlight"><pre><span></span><span class="c"># -l can also be used as a shorthand for --list-defaults</span>
<span class="p">&gt;</span> <span class="n">az</span> <span class="n">configure</span> <span class="p">-</span><span class="n">-list-defaults</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="resource-groups">
<h2>8.3.2. Resource Groups<a class="headerlink" href="#resource-groups" title="Permalink to this headline">¶</a></h2>
<p>We will begin by provisioning a resource group to hold the other resources associated with it. Resource groups are an organizational tool to keep track of and manage resources as a whole instead of individually. This makes it easy to dispose of all of the resources by deleting the resource group they are contained in, instead of deleting them one-by-one.</p>
<div class="section" id="exploration">
<h3>8.3.2.1. Exploration<a class="headerlink" href="#exploration" title="Permalink to this headline">¶</a></h3>
<p>Let’s begin by using our trusty <code class="docutils literal notranslate"><span class="pre">help</span></code> command to learn what management is available for resource groups. Although it’s confusing, remember that resource groups are accessed under the group name <code class="docutils literal notranslate"><span class="pre">group</span></code>.</p>
<div class="highlight-powershell notranslate"><div class="highlight"><pre><span></span><span class="p">&gt;</span> <span class="n">az</span> <span class="nb">group </span><span class="n">-h</span>
</pre></div>
</div>
<p>Take a moment to look over the output. Because resource groups are simple containers, there isn’t much available beyond the standard CRUD commands.</p>
</div>
<div class="section" id="planning">
<h3>8.3.2.2. Planning<a class="headerlink" href="#planning" title="Permalink to this headline">¶</a></h3>
<p>Of the available commands, we can see that our goal is to <code class="docutils literal notranslate"><span class="pre">create</span></code> the resource. Let’s dig into the <code class="docutils literal notranslate"><span class="pre">create</span></code> command to see which arguments are available.</p>
<div class="highlight-powershell notranslate"><div class="highlight"><pre><span></span><span class="p">&gt;</span> <span class="n">az</span> <span class="nb">group </span><span class="n">create</span> <span class="n">-h</span>
</pre></div>
</div>
<p>We will need to provide at minimum the two <em>required</em> arguments:</p>
<ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">-n</span></code> or <code class="docutils literal notranslate"><span class="pre">-g</span></code>: the name of the resource group</li>
<li><code class="docutils literal notranslate"><span class="pre">-l</span></code>: the Azure location</li>
</ul>
<p>Fortunately, we have already configured our default location value of <code class="docutils literal notranslate"><span class="pre">eastus</span></code>, so all we need to supply is the resource group name. We will use a consistent naming convention to make sure none of our resources have conflicting names. In this walkthrough, the convention for resource groups we will use is:</p>
<blockquote>
<div>&lt;name&gt;-cli-wt-rg</div></blockquote>
<p>where <code class="docutils literal notranslate"><span class="pre">&lt;name&gt;</span></code> is your first name. The shorthand <code class="docutils literal notranslate"><span class="pre">cli-wt</span></code> stands for “CLI walkthrough” and <code class="docutils literal notranslate"><span class="pre">rg</span></code> for “resource group.”</p>
<p>Note that there is a 23 character limit for resource names. If you have a long first name, consider using a shorter nickname.</p>
</div>
<div class="section" id="provisioning">
<h3>8.3.2.3. Provisioning<a class="headerlink" href="#provisioning" title="Permalink to this headline">¶</a></h3>
<p>Now that we have determined the command structure and its arguments, we can create our resource group:</p>
<div class="highlight-powershell notranslate"><div class="highlight"><pre><span></span><span class="p">&gt;</span> <span class="n">az</span> <span class="nb">group </span><span class="n">create</span> <span class="n">-n</span> <span class="p">&lt;</span><span class="n">name</span><span class="p">&gt;</span><span class="n">-cli-wt-rg</span>
</pre></div>
</div>
<p>You should see a JSON output like this:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="o">{</span>
    <span class="s2">&quot;id&quot;</span>: <span class="s2">&quot;/subscriptions/&lt;subscription ID&gt;/resourceGroups/&lt;name&gt;-cli-wt-rg&quot;</span>,
    <span class="s2">&quot;location&quot;</span>: <span class="s2">&quot;eastus&quot;</span>,
    <span class="s2">&quot;managedBy&quot;</span>: null,
    <span class="s2">&quot;name&quot;</span>: <span class="s2">&quot;&lt;name&gt;-cli-wt-rg&quot;</span>,
    <span class="s2">&quot;properties&quot;</span>: <span class="o">{</span>
        <span class="s2">&quot;provisioningState&quot;</span>: <span class="s2">&quot;Succeeded&quot;</span>
    <span class="o">}</span>,
    <span class="s2">&quot;tags&quot;</span>: null,
    <span class="s2">&quot;type&quot;</span>: <span class="s2">&quot;Microsoft.Resources/resourceGroups&quot;</span>
<span class="o">}</span>
</pre></div>
</div>
<p>Notice how the subscription and location are set automatically. The former by logging in and the latter by configuring its default value.</p>
</div>
<div class="section" id="configuring">
<h3>8.3.2.4. Configuring<a class="headerlink" href="#configuring" title="Permalink to this headline">¶</a></h3>
<p>Earlier we configured a default location. Now let’s configure the default resource group too. Don’t forget to enter your new resource group name as the value:</p>
<div class="highlight-powershell notranslate"><div class="highlight"><pre><span></span><span class="p">&gt;</span> <span class="n">az</span> <span class="n">configure</span> <span class="p">-</span><span class="n">-default</span> <span class="n">group</span><span class="p">=&lt;</span><span class="n">name</span><span class="p">&gt;</span><span class="n">-cli-wt-rg</span>
</pre></div>
</div>
<p>You can confirm the default has been set by checking the CLI configuration with the <code class="docutils literal notranslate"><span class="pre">-l</span></code> (list) argument and seeing that the group has value has been set correctly:</p>
<div class="highlight-powershell notranslate"><div class="highlight"><pre><span></span><span class="p">&gt;</span> <span class="n">az</span> <span class="n">configure</span> <span class="n">-l</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="virtual-machines">
<h2>8.3.3. Virtual Machines<a class="headerlink" href="#virtual-machines" title="Permalink to this headline">¶</a></h2>
<p>For this walkthrough, we will not be using our VM to deploy an application but simply to get comfortable using the CLI.</p>
<div class="section" id="id1">
<h3>8.3.3.1. Exploration<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h3>
<p>Virtual machines are naturally more complex to interact with than a simple resource group. However, now that we understand the pattern of the <code class="docutils literal notranslate"><span class="pre">az</span> <span class="pre">CLI</span></code>, that complexity can be managed using the <code class="docutils literal notranslate"><span class="pre">help</span></code> command to methodically work our way through its sub-groups and commands.</p>
<p>Once again, let’s begin by assessing what is available to us:</p>
<div class="highlight-powershell notranslate"><div class="highlight"><pre><span></span><span class="p">&gt;</span> <span class="n">az</span> <span class="n">vm</span> <span class="n">-h</span>
</pre></div>
</div>
</div>
<div class="section" id="id2">
<h3>8.3.3.2. Planning<a class="headerlink" href="#id2" title="Permalink to this headline">¶</a></h3>
<p>Recall that in the web portal there were several menus we had to work through to provision a VM. In addition to all of those options, the <code class="docutils literal notranslate"><span class="pre">az</span> <span class="pre">CLI</span></code> exposes additional configuration arguments for more granular control.</p>
<p>Let’s see what arguments are associated with creating a VM:</p>
<div class="highlight-powershell notranslate"><div class="highlight"><pre><span></span><span class="p">&gt;</span> <span class="n">az</span> <span class="n">vm</span> <span class="n">create</span> <span class="n">-h</span>
</pre></div>
</div>
<p>From this long list of arguments we will need to provide values for the following:</p>
<ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">-n</span></code>: the name of the VM</li>
<li><code class="docutils literal notranslate"><span class="pre">-l</span></code>: the location [default configured]</li>
<li><code class="docutils literal notranslate"><span class="pre">-g</span></code>: the resource group name [default configured]</li>
<li><code class="docutils literal notranslate"><span class="pre">--size</span></code>: the size of the VM</li>
<li><code class="docutils literal notranslate"><span class="pre">--image</span></code>: the URN of the image used to create the VM</li>
<li><code class="docutils literal notranslate"><span class="pre">--admin-username</span></code>: the username of the root account for the VM</li>
<li><code class="docutils literal notranslate"><span class="pre">--assign-identity</span></code>: to assign an identity to the VM for granting access to the Key Vault secrets</li>
</ul>
<div class="section" id="listing-images">
<h4>8.3.3.2.1. Listing Images<a class="headerlink" href="#listing-images" title="Permalink to this headline">¶</a></h4>
<p>In order to define the image for the VM we have to find its URN. In the <code class="docutils literal notranslate"><span class="pre">vm</span> <span class="pre">create</span></code> help output we saw a note that guided us in discovering these URN values. Let’s list the available images using the <code class="docutils literal notranslate"><span class="pre">vm</span></code> sub-group <code class="docutils literal notranslate"><span class="pre">image</span></code> and its associated <code class="docutils literal notranslate"><span class="pre">list</span></code> command:</p>
<div class="highlight-powershell notranslate"><div class="highlight"><pre><span></span><span class="p">&gt;</span> <span class="n">az</span> <span class="n">vm</span> <span class="n">image</span> <span class="n">list</span>
</pre></div>
</div>
<p>Many different images are provided in the JSON object list output. All we care for, however, is the URN values. We could manually scroll through all of them to find the URN of the Ubuntu image. Or, we can make use of the global <code class="docutils literal notranslate"><span class="pre">--query</span></code> argument to output only the data we need!</p>
<p>The <a class="reference external" href="https://jmespath.org/" target="_blank">JMESPath query<i class="fas fa-external-link-alt" aria-hidden="true"></i></a> value we will use is <code class="docutils literal notranslate"><span class="pre">&quot;[].urn&quot;</span></code> which means take the output list <code class="docutils literal notranslate"><span class="pre">[]</span></code> and instead of the complete image objects only output the value for each of their the <code class="docutils literal notranslate"><span class="pre">urn</span></code> properties. The result is a list of just URN values, which is much easier to work with</p>
<div class="highlight-powershell notranslate"><div class="highlight"><pre><span></span><span class="p">&gt;</span> <span class="n">az</span> <span class="n">vm</span> <span class="n">image</span> <span class="n">list</span> <span class="p">-</span><span class="n">-query</span> <span class="s2">&quot;[].urn&quot;</span>
</pre></div>
</div>
<p>From here, we can see the URN we need for the Ubuntu image is <code class="docutils literal notranslate"><span class="pre">&quot;Canonical:UbuntuServer:18.04-LTS:latest&quot;</span></code>. Let’s assign that value to a variable so we don’t have to clutter our clipboard:</p>
<div class="literal-block-wrapper docutils container" id="id9">
<div class="code-block-caption"><span class="caption-text">on Windows/PowerShell</span><a class="headerlink" href="#id9" title="Permalink to this code">¶</a></div>
<div class="highlight-powershell notranslate"><div class="highlight"><pre><span></span><span class="p">&gt;</span> <span class="nv">$ImageURN</span><span class="p">=</span><span class="s2">&quot;Canonical:UbuntuServer:18.04-LTS:latest&quot;</span>
</pre></div>
</div>
</div>
<div class="literal-block-wrapper docutils container" id="id10">
<div class="code-block-caption"><span class="caption-text">on Linux/Bash</span><a class="headerlink" href="#id10" title="Permalink to this code">¶</a></div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ <span class="nv">image_urn</span><span class="o">=</span><span class="s2">&quot;Canonical:UbuntuServer:18.04-LTS:latest&quot;</span>
</pre></div>
</div>
</div>
<p>Now we can reference the URN by its variable name: <code class="docutils literal notranslate"><span class="pre">$ImageURN</span></code> (PowerShell) or <code class="docutils literal notranslate"><span class="pre">image_urn</span></code> (Bash), depending on your chosen shell.</p>
<div class="admonition-tip admonition">
<p class="first admonition-title"><i class="fas fa-lightbulb" aria-hidden="true"></i>Tip</p>
<p>You can make use of a slightly more advanced query and in-line execution to do this in one step. Below, we use a filter on the list to only output objects whose URN property <code class="docutils literal notranslate"><span class="pre">contains</span></code> the string Ubuntu. Then we pipe the filtered list and assign the first element’s URN value to the variable.</p>
<div class="literal-block-wrapper docutils container" id="id11">
<div class="code-block-caption"><span class="caption-text">filtering the image list</span><a class="headerlink" href="#id11" title="Permalink to this code">¶</a></div>
<div class="highlight-powershell notranslate"><div class="highlight"><pre><span></span><span class="p">&gt;</span> <span class="n">az</span> <span class="n">vm</span> <span class="n">image</span> <span class="n">list</span> <span class="p">-</span><span class="n">-query</span> <span class="s2">&quot;[? contains(urn, &#39;Ubuntu&#39;)] | [0].urn&quot;</span>
</pre></div>
</div>
</div>
<p>When we issue this command using in-line execution, we can assign output directly to the variable:</p>
<div class="literal-block-wrapper docutils container" id="id12">
<div class="code-block-caption"><span class="caption-text">Windows/PowerShell</span><a class="headerlink" href="#id12" title="Permalink to this code">¶</a></div>
<div class="highlight-powershell notranslate"><div class="highlight"><pre><span></span><span class="p">&gt;</span> <span class="nv">$ImageURN</span><span class="p">=</span><span class="s2">&quot;</span><span class="p">$(</span><span class="n">az</span> <span class="n">vm</span> <span class="n">image</span> <span class="n">list</span> <span class="p">-</span><span class="n">-query</span> <span class="s2">&quot;[? contains(urn, &#39;Ubuntu&#39;)] | [0].urn&quot;</span><span class="p">)</span><span class="s2">&quot;</span>
</pre></div>
</div>
</div>
<p>When using the Bash shell, there is a known <a class="reference external" href="https://github.com/Azure/azure-cli/issues/8401" target="_blank">issue<i class="fas fa-external-link-alt" aria-hidden="true"></i></a> with the default JSON format where it includes quote characters <code class="docutils literal notranslate"><span class="pre">&quot;&quot;</span></code> around single string outputs. Unfortunately, this can break commands and scripts in Bash so we need to request a TSV output format to correct it:</p>
<div class="literal-block-wrapper last docutils container" id="id13">
<div class="code-block-caption"><span class="caption-text">Linux/Bash</span><a class="headerlink" href="#id13" title="Permalink to this code">¶</a></div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># -o: tsv sets the output to TSV format to remove the double quote characters</span>
$ <span class="nv">image_urn</span><span class="o">=</span><span class="s2">&quot;</span><span class="k">$(</span>az vm image list --query <span class="s2">&quot;[? contains(urn, &#39;Ubuntu&#39;)] | [0].urn&quot;</span> -o tsv<span class="k">)</span><span class="s2">&quot;</span>
</pre></div>
</div>
</div>
</div>
</div>
</div>
<div class="section" id="id3">
<h3>8.3.3.3. Provisioning<a class="headerlink" href="#id3" title="Permalink to this headline">¶</a></h3>
<p>Now that we have our image URN, we can provision the VM. We will use the following values for the remaining arguments:</p>
<ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">-n</span></code>: &lt;name&gt;-linux-vm</li>
<li><code class="docutils literal notranslate"><span class="pre">--size</span></code>: Standard_B2s</li>
<li><code class="docutils literal notranslate"><span class="pre">--admin-username</span></code>: student</li>
<li><code class="docutils literal notranslate"><span class="pre">--image</span></code>: the image URN [stored in a variable]</li>
</ul>
<div class="admonition">
<p class="first admonition-title"><i class="fas fa-sticky-note" aria-hidden="true"></i>Note</p>
<p class="last">It is important that you use these exact values so that it is easier to help you if something goes wrong along the way.</p>
</div>
<p>Let’s create our VM! Note that this command will take some time to complete.</p>
<div class="literal-block-wrapper docutils container" id="id14">
<div class="code-block-caption"><span class="caption-text">Windows/PowerShell</span><a class="headerlink" href="#id14" title="Permalink to this code">¶</a></div>
<div class="highlight-powershell notranslate"><div class="highlight"><pre><span></span><span class="p">&gt;</span> <span class="n">az</span> <span class="n">vm</span> <span class="n">create</span> <span class="n">-n</span> <span class="p">&lt;</span><span class="n">name</span><span class="p">&gt;</span><span class="n">-linux-vm</span> <span class="p">-</span><span class="n">-size</span> <span class="s2">&quot;Standard_B2s&quot;</span> <span class="p">-</span><span class="n">-image</span> <span class="s2">&quot;$ImageURN&quot;</span> <span class="p">-</span><span class="n">-admin-username</span> <span class="s2">&quot;student&quot;</span> <span class="p">-</span><span class="n">-assign-identity</span>
</pre></div>
</div>
</div>
<div class="literal-block-wrapper docutils container" id="id15">
<div class="code-block-caption"><span class="caption-text">Linux/Bash</span><a class="headerlink" href="#id15" title="Permalink to this code">¶</a></div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ az vm create -n &lt;name&gt;-linux-vm --size <span class="s2">&quot;Standard_B2s&quot;</span> --image <span class="s2">&quot;</span><span class="nv">$image_urn</span><span class="s2">&quot;</span> --admin-username <span class="s2">&quot;student&quot;</span> --assign-identity
</pre></div>
</div>
</div>
<div class="admonition-note admonition">
<p class="first admonition-title"><i class="fas fa-sticky-note" aria-hidden="true"></i>Note</p>
<p>If you receive the following error output:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>An RSA key file or key value must be supplied to SSH Key Value.

You can use --generate-ssh-keys to <span class="nb">let</span> CLI generate one <span class="k">for</span> you
</pre></div>
</div>
<p class="last">You can fix this by reissuing the command and appending <code class="docutils literal notranslate"><span class="pre">--generate-ssh-keys</span></code> after <code class="docutils literal notranslate"><span class="pre">--assign-identity</span></code>. We will learn about SSH, RSA keys, and how they relate to this message in later lessons.</p>
</div>
<p>You should receive an output like this:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="o">{</span>
    <span class="s2">&quot;fqdns&quot;</span>: <span class="s2">&quot;&quot;</span>,
    <span class="s2">&quot;id&quot;</span>: <span class="s2">&quot;/subscriptions/&lt;subscription ID&gt;/resourceGroups/&lt;name&gt;-cli-wt-rg/providers/Microsoft.Compute/virtualMachines/&lt;name&gt;-linux-vm&quot;</span>,
    <span class="s2">&quot;identity&quot;</span>: <span class="o">{</span>
        <span class="s2">&quot;systemAssignedIdentity&quot;</span>: <span class="s2">&quot;&lt;vm object ID&gt;&quot;</span>,
        <span class="s2">&quot;userAssignedIdentities&quot;</span>: <span class="o">{}</span>
    <span class="o">}</span>,
    <span class="s2">&quot;location&quot;</span>: <span class="s2">&quot;eastus&quot;</span>,
    <span class="s2">&quot;macAddress&quot;</span>: <span class="s2">&quot;00-0D-3A-18-98-5F&quot;</span>,
    <span class="s2">&quot;powerState&quot;</span>: <span class="s2">&quot;VM running&quot;</span>,
    <span class="s2">&quot;privateIpAddress&quot;</span>: <span class="s2">&quot;10.0.0.4&quot;</span>,
    <span class="s2">&quot;publicIpAddress&quot;</span>: <span class="s2">&quot;13.72.111.180&quot;</span>,
    <span class="s2">&quot;resourceGroup&quot;</span>: <span class="s2">&quot;&lt;name&gt;-cli-wt-rg&quot;</span>,
    <span class="s2">&quot;zones&quot;</span>: <span class="s2">&quot;&quot;</span>
<span class="o">}</span>
</pre></div>
</div>
<p>Notice how the default resource group value you set earlier was automatically included along with the subscription and location.</p>
</div>
<div class="section" id="id4">
<h3>8.3.3.4. Configuring<a class="headerlink" href="#id4" title="Permalink to this headline">¶</a></h3>
<p>Before we continue, let’s set this VM as the default:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ az configure --default <span class="nv">vm</span><span class="o">=</span>&lt;name&gt;-linux-vm
</pre></div>
</div>
<p>Next let’s use the VM <code class="docutils literal notranslate"><span class="pre">show</span></code> command to view all of the details of our new VM. The <code class="docutils literal notranslate"><span class="pre">show</span></code> command requires the following arguments:</p>
<ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">-n</span></code>: VM name (<code class="docutils literal notranslate"><span class="pre">--ids</span></code> can be used in place of the name)</li>
<li><code class="docutils literal notranslate"><span class="pre">-g</span></code>: the resource group the VM is in</li>
<li><code class="docutils literal notranslate"><span class="pre">--subscription</span></code>: the subscription the VM is a part of</li>
</ul>
<p>Since we have configured default values for each of these arguments, we do not need to provide any of them to issue the command:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ az vm show
</pre></div>
</div>
<p>If you configured the default VM correctly, you should receive a lengthy output object representing the state and configuration of the new VM. We will make use of the <code class="docutils literal notranslate"><span class="pre">show</span></code> command when granting access to the Key Vault in the following section.</p>
</div>
</div>
<div class="section" id="key-vault-secrets">
<h2>8.3.4. Key Vault Secrets<a class="headerlink" href="#key-vault-secrets" title="Permalink to this headline">¶</a></h2>
<p>As our final step, we will provision and configure our Key Vault. Recall that the Key Vault is used to store external configuration values for flexibility and security. We use the Key Vault (and its local counterpart, <code class="docutils literal notranslate"><span class="pre">user-secrets</span></code>) to keep our protected credentials out of version control.</p>
<div class="section" id="id5">
<h3>8.3.4.1. Exploration<a class="headerlink" href="#id5" title="Permalink to this headline">¶</a></h3>
<p>First explore the command using the <code class="docutils literal notranslate"><span class="pre">keyvault</span></code> group name:</p>
<div class="highlight-powershell notranslate"><div class="highlight"><pre><span></span><span class="p">&gt;</span> <span class="n">az</span> <span class="n">keyvault</span> <span class="n">-h</span>
</pre></div>
</div>
<p>From the Key Vault help we will need to use the <code class="docutils literal notranslate"><span class="pre">secret</span></code> sub-group along with the <code class="docutils literal notranslate"><span class="pre">create</span></code> and <code class="docutils literal notranslate"><span class="pre">set-policy</span></code> commands.</p>
</div>
<div class="section" id="id6">
<h3>8.3.4.2. Planning<a class="headerlink" href="#id6" title="Permalink to this headline">¶</a></h3>
<p>Looking back on the steps we performed in the web portal, we will need to:</p>
<ol class="arabic simple">
<li>Create a Key Vault</li>
<li>Add a secret for the database connection string</li>
<li>Grant permission to the VM so it can access the connection string secret</li>
</ol>
<div class="section" id="creating-a-key-vault">
<h4>8.3.4.2.1. Creating a Key Vault<a class="headerlink" href="#creating-a-key-vault" title="Permalink to this headline">¶</a></h4>
<p>To create a Key Vault, we need to know what arguments it requires. Let’s use the help command:</p>
<div class="highlight-powershell notranslate"><div class="highlight"><pre><span></span><span class="p">&gt;</span> <span class="n">az</span> <span class="n">keyvault</span> <span class="n">create</span> <span class="n">-h</span>
</pre></div>
</div>
<p>From the list of arguments we will need to provide:</p>
<ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">-n</span></code>: the name of the Key Vault</li>
<li><code class="docutils literal notranslate"><span class="pre">-g</span></code>: the resource group name [default configured]</li>
<li><code class="docutils literal notranslate"><span class="pre">-l</span></code>: the location [default configured]</li>
</ul>
</div>
<div class="section" id="adding-a-connection-string-secret">
<h4>8.3.4.2.2. Adding a Connection String Secret<a class="headerlink" href="#adding-a-connection-string-secret" title="Permalink to this headline">¶</a></h4>
<p>Let’s see what command and arguments we need for creating the connection string secret:</p>
<div class="highlight-powershell notranslate"><div class="highlight"><pre><span></span><span class="p">&gt;</span> <span class="n">az</span> <span class="n">keyvault</span> <span class="n">secret</span> <span class="n">-h</span>
</pre></div>
</div>
<p>We can see that the <code class="docutils literal notranslate"><span class="pre">set</span></code> command is used to create or update a secret. What arguments does it require?</p>
<div class="highlight-powershell notranslate"><div class="highlight"><pre><span></span><span class="p">&gt;</span> <span class="n">az</span> <span class="n">keyvault</span> <span class="n">secret</span> <span class="nb">set </span><span class="n">-h</span>
</pre></div>
</div>
<p>We will need to provide:</p>
<ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">-n</span></code>: the name of the secret</li>
<li><code class="docutils literal notranslate"><span class="pre">--value</span></code>: the value of the secret</li>
<li><code class="docutils literal notranslate"><span class="pre">--vault-name</span></code>: the name of the Key Vault the secret belongs to</li>
</ul>
</div>
<div class="section" id="granting-vm-access-to-the-key-vault">
<h4>8.3.4.2.3. Granting VM Access to the Key Vault<a class="headerlink" href="#granting-vm-access-to-the-key-vault" title="Permalink to this headline">¶</a></h4>
<p>After we provision the Key Vault, we will need to set its access policy to allow the VM to read the connection string secret. Let’s see what arguments the <code class="docutils literal notranslate"><span class="pre">set-policy</span></code> command takes:</p>
<div class="highlight-powershell notranslate"><div class="highlight"><pre><span></span><span class="p">&gt;</span> <span class="n">az</span> <span class="n">keyvault</span> <span class="nb">set-policy</span> <span class="n">-h</span>
</pre></div>
</div>
<p>We will need to provide:</p>
<ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">-n</span></code>: the name of the Key Vault</li>
<li><code class="docutils literal notranslate"><span class="pre">-g</span></code>: the resource group it belongs to [default configured]</li>
<li><code class="docutils literal notranslate"><span class="pre">--object-id</span></code>: the VM object ID that uniquely identifies it for granting access</li>
<li><code class="docutils literal notranslate"><span class="pre">--secret-permissions</span></code>: space-separated list of access permissions to secrets to grant the VM</li>
</ul>
<p>We will discuss how the <code class="docutils literal notranslate"><span class="pre">--object-id</span></code> and <code class="docutils literal notranslate"><span class="pre">--secret-permissions</span></code> arguments will be defined in the Key Vault Configuration section.</p>
</div>
</div>
<div class="section" id="id7">
<h3>8.3.4.3. Provisioning<a class="headerlink" href="#id7" title="Permalink to this headline">¶</a></h3>
<p>First let’s create the Key Vault itself. Key Vaults, unlike most other resources, have names that <em>must be globally unique across all Azure accounts</em>. For this reason, we will need to use a unique pattern:</p>
<p><code class="docutils literal notranslate"><span class="pre">lc-&lt;YY&gt;-&lt;name&gt;-kv</span></code>, with <code class="docutils literal notranslate"><span class="pre">YY</span></code> standing for the current 2-digit year.</p>
<p>This pattern should be unique, but if you share a name with another student in the class just append your favorite number to the end. Make note of this number if requesting help from your instructor.</p>
<p>Before issuing the command, let’s store the Key Vault name in a variable so we can easily reference it in future tasks:</p>
<div class="literal-block-wrapper docutils container" id="id16">
<div class="code-block-caption"><span class="caption-text">Windows/PowerShell</span><a class="headerlink" href="#id16" title="Permalink to this code">¶</a></div>
<div class="highlight-powershell notranslate"><div class="highlight"><pre><span></span><span class="p">&gt;</span> <span class="nv">$KeyVaultName</span><span class="p">=</span><span class="s2">&quot;lc-20-&lt;name&gt;-kv&quot;</span>
<span class="p">&gt;</span> <span class="n">az</span> <span class="n">keyvault</span> <span class="n">create</span> <span class="n">-n</span> <span class="s2">&quot;$KeyVaultName&quot;</span>
</pre></div>
</div>
</div>
<div class="literal-block-wrapper docutils container" id="id17">
<div class="code-block-caption"><span class="caption-text">Linux/Bash</span><a class="headerlink" href="#id17" title="Permalink to this code">¶</a></div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ <span class="nv">keyvault_name</span><span class="o">=</span><span class="s2">&quot;lc-20-&lt;name&gt;-kv&quot;</span>
$ az keyvault create -n <span class="s2">&quot;</span><span class="nv">$keyvault_name</span><span class="s2">&quot;</span>
</pre></div>
</div>
</div>
<p>After the Key Vault has been provisioned, let’s set the connection string secret name and value:</p>
<ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">--vault-name</span></code>: the Key Vault name [stored in a variable]</li>
<li><code class="docutils literal notranslate"><span class="pre">name</span></code>: “ConnectionStrings–Default”</li>
<li><code class="docutils literal notranslate"><span class="pre">value</span></code>: “server=localhost;port=3306;database=coding_events;user=coding_events;password=launchcode”</li>
</ul>
<div class="admonition-tip admonition">
<p class="first admonition-title"><i class="fas fa-lightbulb" aria-hidden="true"></i>Tip</p>
<p>Recall that secrets are like the other JSON entries in <code class="docutils literal notranslate"><span class="pre">application.properties</span></code> that we need to keep private and out of version control. The <code class="docutils literal notranslate"><span class="pre">--</span></code> is used as shorthand to define properties of JSON objects in a single flat string for the CLI command. In this case, it is used to define a property called <code class="docutils literal notranslate"><span class="pre">Default</span></code> of a <code class="docutils literal notranslate"><span class="pre">ConnectionStrings</span></code> JSON object that would look like this:</p>
<div class="last highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="s2">&quot;ConnectionStrings&quot;</span><span class="o">:</span> <span class="p">{</span>
    <span class="s2">&quot;Default&quot;</span><span class="o">:</span> <span class="s2">&quot;&lt;connection string value&gt;&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="literal-block-wrapper docutils container" id="id18">
<div class="code-block-caption"><span class="caption-text">Windows/PowerShell</span><a class="headerlink" href="#id18" title="Permalink to this code">¶</a></div>
<div class="highlight-powershell notranslate"><div class="highlight"><pre><span></span><span class="p">&gt;</span> <span class="n">az</span> <span class="n">keyvault</span> <span class="n">secret</span> <span class="nb">set </span><span class="p">-</span><span class="n">-vault-name</span> <span class="s2">&quot;$KeyVaultName&quot;</span> <span class="n">-n</span> <span class="s2">&quot;ConnectionStrings--Default&quot;</span> <span class="p">-</span><span class="n">-value</span> <span class="s2">&quot;server=localhost;port=3306;database=coding_events;user=coding_events;password=launchcode&quot;</span>
</pre></div>
</div>
</div>
<div class="literal-block-wrapper docutils container" id="id19">
<div class="code-block-caption"><span class="caption-text">Linux/Bash</span><a class="headerlink" href="#id19" title="Permalink to this code">¶</a></div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ az keyvault secret <span class="nb">set</span> --vault-name <span class="s2">&quot;</span><span class="nv">$keyvault_name</span><span class="s2">&quot;</span> -n <span class="s2">&quot;ConnectionStrings--Default&quot;</span> --value <span class="s2">&quot;server=localhost;port=3306;database=coding_events;user=coding_events;password=launchcode&quot;</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="id8">
<h3>8.3.4.4. Configuring<a class="headerlink" href="#id8" title="Permalink to this headline">¶</a></h3>
<p>Now that the Key Vault and connection string secret have been managed, all that remains is to to set the access policy for the VM. Earlier, we listed two arguments needed for the <code class="docutils literal notranslate"><span class="pre">set-policy</span></code> Key Vault command whose values weren’t immediately obvious, the <code class="docutils literal notranslate"><span class="pre">--object-id</span></code> and <code class="docutils literal notranslate"><span class="pre">--secret-permissions</span></code>.</p>
<div class="section" id="getting-the-vm-object-id">
<h4>8.3.4.4.1. Getting the VM Object ID<a class="headerlink" href="#getting-the-vm-object-id" title="Permalink to this headline">¶</a></h4>
<p id="index-0">In order to grant access to a resource we need to provide a unique identifier for it. When we provisioned our VM earlier, we used the <code class="docutils literal notranslate"><span class="pre">--assign-identity</span></code> argument to generate and assign a <strong>service principal identifier</strong>. Azure documentation refers to this identifier as either a <strong>principal ID</strong> or an <strong>object ID</strong>.</p>
<p>The VM <code class="docutils literal notranslate"><span class="pre">show</span></code> command provided us with a JSON object of configuration details. Issue the <code class="docutils literal notranslate"><span class="pre">show</span></code> command again and look for the <code class="docutils literal notranslate"><span class="pre">identity</span></code> object property. Within this sub-object is the <code class="docutils literal notranslate"><span class="pre">principalId</span></code> that we need.</p>
<p>We can capture this value in a variable by combining the VM <code class="docutils literal notranslate"><span class="pre">show</span></code> command with a <code class="docutils literal notranslate"><span class="pre">--query</span></code> filter:</p>
<div class="literal-block-wrapper docutils container" id="id20">
<div class="code-block-caption"><span class="caption-text">Windows/PowerShell</span><a class="headerlink" href="#id20" title="Permalink to this code">¶</a></div>
<div class="highlight-powershell notranslate"><div class="highlight"><pre><span></span><span class="p">&gt;</span> <span class="nv">$VmObjectId</span><span class="p">=</span><span class="s2">&quot;</span><span class="p">$(</span><span class="n">az</span> <span class="n">vm</span> <span class="n">show</span> <span class="p">-</span><span class="n">-query</span> <span class="s2">&quot;identity.principalId&quot;</span><span class="p">)</span><span class="s2">&quot;</span>
</pre></div>
</div>
</div>
<div class="literal-block-wrapper docutils container" id="id21">
<div class="code-block-caption"><span class="caption-text">Linux/Bash</span><a class="headerlink" href="#id21" title="Permalink to this code">¶</a></div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ <span class="nv">vm_object_id</span><span class="o">=</span><span class="s2">&quot;</span><span class="k">$(</span>az vm show --query <span class="s2">&quot;identity.principalId&quot;</span> -o tsv<span class="k">)</span><span class="s2">&quot;</span>
</pre></div>
</div>
</div>
<div class="admonition">
<p class="first admonition-title"><i class="fas fa-lightbulb" aria-hidden="true"></i>Tip</p>
<p class="last">While exploring the VM group, you may have noticed a sub-group called <code class="docutils literal notranslate"><span class="pre">identity</span></code>. This sub-group is a shortcut for accessing the same information. How would you modify your command and <code class="docutils literal notranslate"><span class="pre">--query</span></code> to use this sub-group instead?</p>
</div>
</div>
<div class="section" id="least-privileged-access">
<h4>8.3.4.4.2. Least-Privileged Access<a class="headerlink" href="#least-privileged-access" title="Permalink to this headline">¶</a></h4>
<p>The <code class="docutils literal notranslate"><span class="pre">--secret-permissions</span></code> argument accepts a space-separated list of permissions you would like to grant to the given resource object, our VM in this case. Of the many available permissions, which should we choose to grant and why?</p>
<p>Remember that whenever you are granting permissions you want to follow the concept of least-privileged access. In our case, the API hosted by the VM only needs the ability to <em>read</em> from its Key Vault. It has no need for writing or deletion capabilities. The minimum permissions we need to grant to the VM to support this use case are:</p>
<ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">get</span></code>: for accessing the individual secret values</li>
<li><code class="docutils literal notranslate"><span class="pre">list</span></code>: for accessing the names of secrets so they can be read</li>
</ul>
</div>
<div class="section" id="granting-vm-access">
<h4>8.3.4.4.3. Granting VM Access<a class="headerlink" href="#granting-vm-access" title="Permalink to this headline">¶</a></h4>
<p>It’s now time to issue our final command:</p>
<div class="literal-block-wrapper docutils container" id="id22">
<div class="code-block-caption"><span class="caption-text">Windows/PowerShell</span><a class="headerlink" href="#id22" title="Permalink to this code">¶</a></div>
<div class="highlight-powershell notranslate"><div class="highlight"><pre><span></span><span class="p">&gt;</span> <span class="n">az</span> <span class="n">keyvault</span> <span class="nb">set-policy</span> <span class="n">-n</span> <span class="s2">&quot;$KeyVaultName&quot;</span> <span class="p">-</span><span class="n">-object-id</span> <span class="s2">&quot;$VmObjectId&quot;</span> <span class="p">-</span><span class="n">-secret-permissions</span> <span class="n">get</span> <span class="n">list</span>
</pre></div>
</div>
</div>
<div class="literal-block-wrapper docutils container" id="id23">
<div class="code-block-caption"><span class="caption-text">Linux/Bash</span><a class="headerlink" href="#id23" title="Permalink to this code">¶</a></div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ az keyvault set-policy -n <span class="s2">&quot;</span><span class="nv">$keyvault_name</span><span class="s2">&quot;</span> --object-id <span class="s2">&quot;</span><span class="nv">$vm_object_id</span><span class="s2">&quot;</span> --secret-permissions get list
</pre></div>
</div>
</div>
<p>If everything went well, you should get a confirmation output with a new entry under <code class="docutils literal notranslate"><span class="pre">properties.accessPolicies</span></code> for our VM that looks like this:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;applicationId&quot;</span><span class="o">:</span> <span class="kc">null</span><span class="p">,</span>
    <span class="s2">&quot;objectId&quot;</span><span class="o">:</span> <span class="s2">&quot;&lt;vm object ID&gt;&quot;</span><span class="p">,</span>
    <span class="s2">&quot;permissions&quot;</span><span class="o">:</span> <span class="p">{</span>
      <span class="s2">&quot;certificates&quot;</span><span class="o">:</span> <span class="kc">null</span><span class="p">,</span>
      <span class="s2">&quot;keys&quot;</span><span class="o">:</span> <span class="kc">null</span><span class="p">,</span>
      <span class="s2">&quot;secrets&quot;</span><span class="o">:</span> <span class="p">[</span>
        <span class="s2">&quot;get&quot;</span><span class="p">,</span>
        <span class="s2">&quot;list&quot;</span>
      <span class="p">],</span>
      <span class="s2">&quot;storage&quot;</span><span class="o">:</span> <span class="kc">null</span>
    <span class="p">},</span>
    <span class="s2">&quot;tenantId&quot;</span><span class="o">:</span> <span class="s2">&quot;&lt;azure directory ID&gt;&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="next-step">
<h2>8.3.5. Next Step<a class="headerlink" href="#next-step" title="Permalink to this headline">¶</a></h2>
<p>Before moving on, let’s revisit the web portal and see all the resources we created. Look for your CLI walkthrough resource group. Take a few minutes to see how all of the configurations you performed from the CLI resulted in the same resources as those you provisioned before. Remember that the CLI and GUI are just <em>interfaces</em> for interacting with the central API that backs them.</p>
<p>After reviewing your resources, it’s time to clean up after ourselves by deleting the resource group. This will delete all of the resources contained in it so that we don’t use up our subscription credits. Notice how we don’t have to specify the group because it has been set as a default:</p>
<div class="highlight-powershell notranslate"><div class="highlight"><pre><span></span><span class="c"># when prompted enter y for yes</span>
<span class="p">&gt;</span> <span class="n">az</span> <span class="nb">group </span><span class="n">delete</span>
</pre></div>
</div>
<p>Congratulations on learning a new way of managing your Azure resources. Now that you have tried both the CLI and GUI, what are the pros and cons of each type of interface? In terms of automation, consider how all of these steps could be accomplished in a single command by composing them into a script. Next, we will learn about provisioning and configuring a new type of VM, the Windows Server, along with its suite of related tools!</p>
</div>
</div>



    
    <nav aria-label="Next and Previous Pages">
      <ul class="pager">
        
        <li class="previous"><a href="az-cli-fundamentals.html"><span aria-hidden="true">&larr;</span> 8.2. Azure CLI Practical Fundamentals</a></li>
        
        
        <li class="next"><a href="walkthrough_bash-scripting-automated-deployment.html">8.4. Exploration: an Automated Deployment Bash Script <span aria-hidden="true">&rarr;</span></a></li>
        
      </ul>
    </nav>
    
    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
    <p class="pull-right">
      <a href="#">Back to top</a>
      
        <br/>
        
<div id="sourcelink">
  <a href="../../_sources/chapters/az-cli/walkthrough_az-cli.rst.txt"
     rel="nofollow">Page Source</a>
</div>
      
    </p>
    <p>
    </p>
  </div>
</footer>
  </body>
</html>
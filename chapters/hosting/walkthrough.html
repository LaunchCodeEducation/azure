<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>4.4. Walkthrough: Running Code Anywhere &#8212; Microsoft Azure  documentation</title>
    <link rel="stylesheet" href="../../_static/bootstrap-sphinx.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../../_static/fa/css/all.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/css/launchcode.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/css/site.css" />
    <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <script type="text/javascript" src="../../_static/language_data.js"></script>
    <script type="text/javascript" src="../../_static/js/jquery-1.11.0.min.js"></script>
    <script type="text/javascript" src="../../_static/js/jquery-fix.js"></script>
    <script type="text/javascript" src="../../_static/bootstrap-3.3.7/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="../../_static/bootstrap-sphinx.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="4.5. (Remote) Studio: Deploying &amp; Connecting to a Machine on the Same LAN" href="studio-2.html" />
    <link rel="prev" title="4.3. Processes &amp; Ports" href="processes-ports.html" />
<meta charset='utf-8'>
<meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1'>
<meta name="apple-mobile-web-app-capable" content="yes">

  </head><body class="body-bc">

<div id="navbar" class="navbar navbar-default navbar-fixed-top">
   <div class="container">
     <div class="navbar-header">
       <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
       <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
         <span class="icon-bar"></span>
         <span class="icon-bar"></span>
         <span class="icon-bar"></span>
       </button>
       <a class="navbar-brand" href="../../index.html"><span><img src="../../_static/lc-ed-logo.png" alt="LaunchCode logo"></span>
       </a>
       <span class="navbar-text navbar-version pull-left"><b></b></span>
     </div>

       <div class="collapse navbar-collapse nav-collapse">
         <ul class="nav navbar-nav">
           
           
             
           
           
           
           
           
         </ul>

         
           
<form class="navbar-form navbar-right" action="../../search.html" method="get">
 <div class="form-group">
    <label for="q" class="searchLabel">Search</label>
    <input type="text" name="q" class="form-control" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
         
       </div>
   </div>
 </div>

<ol class="breadcrumb container">
    <li><a href="../../index.html">Contents</a></li>
    <li><a href="index.html">4. Introduction to Web Hosting</a></li>
    <li class="active">4.4. Walkthrough: Running Code Anywhere</li>
</ol>



<div class="container">
  <div class="row">
    <div class="col-md-10 col-md-offset-1 content ">

    
  <div class="section" id="walkthrough-running-code-anywhere">
<h1>4.4. Walkthrough: Running Code Anywhere<a class="headerlink" href="#walkthrough-running-code-anywhere" title="Permalink to this headline">¶</a></h1>
<p>So far you have been writing and running your code on your local machine. This works well for development but in order to <em>host your application</em> on the internet you will need to run it on a remote machine.</p>
<p>Recall that when we publish our application we are creating build artifacts that we can use to run our application. Once we have published the application, we gain the benefit of portability. We can take those build artifacts and run it on any other machine that has the .NET runtime.</p>
<p>In this studio we are going to practice the steps needed to run code on a different machine than where it was written. Each of you will partner with another student to practice cloning, publishing, executing, and connecting to each other’s applications.</p>
<div class="section" id="the-dev-side">
<h2>4.4.1. The Dev Side<a class="headerlink" href="#the-dev-side" title="Permalink to this headline">¶</a></h2>
<p>The application we will work with is a project we will be building up throughout this class as we introduce new topics. It is a basic REST web API with a SQLite database and a single resource, <code class="docutils literal notranslate"><span class="pre">CodingEvents</span></code>. The API has endpoints for CRUD operations to manage <code class="docutils literal notranslate"><span class="pre">CodingEvents</span></code>. In other words, it exposes endpoints for creating, reading (the collection or a single resource), and deleting <code class="docutils literal notranslate"><span class="pre">CodingEvents</span></code>.</p>
<p>Because web APIs are inherently <em>headless</em> (they do not have a front-end) the project includes a tool called Swagger UI. This is a simple web page that documents the API and allows you to explore the endpoints with a built-in tool for executing requests.</p>
<p>We will cover web APIs, REST, and Swagger in greater detail in a future lesson. So feel free to look over the code but don’t worry if it looks foreign to you! Today the goal is just to practice publishing, executing, and connecting across machines.</p>
<div class="section" id="fork-the-repo">
<h3>4.4.1.1. Fork the Repo<a class="headerlink" href="#fork-the-repo" title="Permalink to this headline">¶</a></h3>
<p>We will begin by forking the API repo into our own accounts. This will allow us to make and push changes we make throughout the week.</p>
<p>First go to <a class="reference external" href="https://github.com/launchcodeeducation/coding-events-api" target="_blank">Coding Events API Repo<i class="fas fa-external-link-alt" aria-hidden="true"></i></a>.</p>
<p>At the top right corner select the <em>Fork</em> option:</p>
<img alt="../../_images/fork-repo.png" src="../../_images/fork-repo.png" />
<p>Once you have forked the repo you will be sent to the forked version under your GitHub account:</p>
<img alt="../../_images/forked-repo.png" src="../../_images/forked-repo.png" />
</div>
<div class="section" id="clone-the-forked-repo">
<h3>4.4.1.2. Clone the Forked Repo<a class="headerlink" href="#clone-the-forked-repo" title="Permalink to this headline">¶</a></h3>
<p>Copy the remote address using the green <em>Clone or download</em> button:</p>
<img alt="../../_images/clone.png" src="../../_images/clone.png" />
<p>Next, clone the repo on your local machine. Make sure to clone the repo into a location you will remember.</p>
<p>The example below clones it into the <code class="docutils literal notranslate"><span class="pre">~/coding-projects/azure/coding-events-api</span></code> file path. If you already have a preferred location feel free to edit the command for that file path instead:</p>
<div class="literal-block-wrapper docutils container" id="id1">
<div class="code-block-caption"><span class="caption-text">set the cloned directory path wherever you’d like to clone the project</span><a class="headerlink" href="#id1" title="Permalink to this code">¶</a></div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ git clone https://github.com/&lt;your username&gt;/coding-events-api.git ~/coding-projects/azure/coding-events-api
</pre></div>
</div>
</div>
<p>There are a number of branches that correspond with studios for this class. Today we will be working with the first one, which has the basic version of the API.</p>
<p>Checkout the <code class="docutils literal notranslate"><span class="pre">1-sqlite</span></code> branch:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ git checkout <span class="m">1</span>-sqlite
</pre></div>
</div>
</div>
</div>
<div class="section" id="the-ops-side">
<h2>4.4.2. The Ops Side<a class="headerlink" href="#the-ops-side" title="Permalink to this headline">¶</a></h2>
<p>Before we get to running our own virtual machine on Azure we need to get comfortable with the basics. Remember that virtual machines don’t have a graphical interface like your IDE. There won’t be a shiny green play button in the cloud to run your application. In fact, there won’t even be a mouse pointer!</p>
<p>We will simulate what it’s like to run our application in the cloud by going through similar steps locally from the command line. First on your own machine, and then by swapping with your partner to publish and run each other’s code.</p>
<div class="admonition">
<p class="first admonition-title"><i class="fas fa-sticky-note" aria-hidden="true"></i>Note</p>
<p class="last">Before continuing, make sure you have the tools you need. If you do not have the Linux subsystem set up with the <code class="docutils literal notranslate"><span class="pre">dotnet</span></code> CLI tool refer to <a class="reference internal" href="../shell-intro/walkthrough_setup-wsl.html#cli-setup"><span class="std std-ref">Walkthrough: Set Up Linux &amp; Bash With WSL</span></a>.</p>
</div>
<div class="section" id="publish-the-api">
<h3>4.4.2.1. Publish the API<a class="headerlink" href="#publish-the-api" title="Permalink to this headline">¶</a></h3>
<p>There are multiple ways to publish your project and even more to customize how it is packaged. In this course we will focus on the <a class="reference external" href="https://docs.microsoft.com/en-us/dotnet/core/deploying/#publish-self-contained" target="_blank">self-contained<i class="fas fa-external-link-alt" aria-hidden="true"></i></a> strategy with options to build a single executable project file. Rather than using our IDE, we will use the <code class="docutils literal notranslate"><span class="pre">dotnet</span></code> CLI tool to get comfortable working from the command line.</p>
<p>First, navigate to your cloned repo (solution) directory. In the cloning example above, the path to that directory was <code class="docutils literal notranslate"><span class="pre">~/coding-projects/azure/coding-events-api</span></code>:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ <span class="nb">cd</span> ~/coding-projects/azure/coding-events-api
</pre></div>
</div>
<p>From within the solution directory, run the following command to publish your first release:</p>
<div class="literal-block-wrapper docutils container" id="id2">
<div class="code-block-caption"><span class="caption-text">make sure to run this from the root (solution) directory</span><a class="headerlink" href="#id2" title="Permalink to this code">¶</a></div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ dotnet publish -c Release
</pre></div>
</div>
</div>
<p>This will publish to <code class="docutils literal notranslate"><span class="pre">CodingEventsAPI/bin/Release/netcoreapp3.1/linux-x64/publish/</span></code></p>
<p>Notice that it automatically published as a self-contained, single (executable) file, built to execute on the <code class="docutils literal notranslate"><span class="pre">linux-x64</span></code> runtime. These defaults are set in the <code class="docutils literal notranslate"><span class="pre">CodingEventsAPI/CodingEventsAPI.csproj</span></code> configuration file by the following attributes:</p>
<div class="literal-block-wrapper docutils container" id="id3">
<div class="code-block-caption"><span class="caption-text">CodingEventsAPI/CodingEventsAPI.csproj</span><a class="headerlink" href="#id3" title="Permalink to this code">¶</a></div>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="cp">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;</span>
<span class="nt">&lt;Project</span> <span class="na">Sdk=</span><span class="s">&quot;Microsoft.NET.Sdk.Web&quot;</span><span class="nt">&gt;</span>
   <span class="nt">&lt;PropertyGroup&gt;</span>
      <span class="nt">&lt;SelfContained&gt;</span>true<span class="nt">&lt;/SelfContained&gt;</span>
      <span class="nt">&lt;PublishSingleFile&gt;</span>true<span class="nt">&lt;/PublishSingleFile&gt;</span>
      <span class="nt">&lt;RuntimeIdentifier&gt;</span>linux-x64<span class="nt">&lt;/RuntimeIdentifier&gt;</span>
</pre></div>
</div>
</div>
<p>These defaults are the equivalent of running the publish command with the following options:</p>
<div class="literal-block-wrapper docutils container" id="id4">
<div class="code-block-caption"><span class="caption-text">make sure to run this from the root (solution) directory</span><a class="headerlink" href="#id4" title="Permalink to this code">¶</a></div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ dotnet publish -c Release -r linux-x64 -p:PublishSingleFile<span class="o">=</span><span class="nb">true</span>
</pre></div>
</div>
</div>
<div class="admonition">
<p class="first admonition-title"><i class="fas fa-lightbulb" aria-hidden="true"></i>Tip</p>
<p class="last">If you change the <code class="docutils literal notranslate"><span class="pre">-r</span></code> option to a different <a class="reference external" href="https://docs.microsoft.com/en-us/dotnet/core/rid-catalog" target="_blank">RID value<i class="fas fa-external-link-alt" aria-hidden="true"></i></a> you can build for other runtimes as needed, while still using the defaults for the other options.</p>
</div>
</div>
<div class="section" id="execute-the-api">
<h3>4.4.2.2. Execute the API<a class="headerlink" href="#execute-the-api" title="Permalink to this headline">¶</a></h3>
<p>Within the <code class="docutils literal notranslate"><span class="pre">CodingEventsAPI/bin/Release/netcoreapp3.1/linux-x64/publish/</span></code> directory is the single executable file <code class="docutils literal notranslate"><span class="pre">CodingEventsAPI</span></code>. All you need to do to run it is execute that file.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ ./CodingEventsAPI/bin/Release/netcoreapp3.1/linux-x64/publish/CodingEventsAPI
</pre></div>
</div>
<p>Now you can navigate to <a class="reference external" href="https://localhost:5001" target="_blank">https://localhost:5001<i class="fas fa-external-link-alt" aria-hidden="true"></i></a> and view the Swagger API documentation.</p>
</div>
</div>
</div>



    
    <nav aria-label="Next and Previous Pages">
      <ul class="pager">
        
        <li class="previous"><a href="processes-ports.html"><span aria-hidden="true">&larr;</span> 4.3. Processes &amp; Ports</a></li>
        
        
        <li class="next"><a href="studio-2.html">4.5. (Remote) Studio: Deploying &amp; Connecting to a Machine on the Same LAN <span aria-hidden="true">&rarr;</span></a></li>
        
      </ul>
    </nav>
    
    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
    <p class="pull-right">
      <a href="#">Back to top</a>
      
        <br/>
        
<div id="sourcelink">
  <a href="../../_sources/chapters/hosting/walkthrough.rst.txt"
     rel="nofollow">Page Source</a>
</div>
      
    </p>
    <p>
    </p>
  </div>
</footer>
  </body>
</html>
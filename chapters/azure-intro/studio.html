<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>5.5. Studio: Deploy CodingEventsAPI &#8212; Microsoft Azure  documentation</title>
    <link rel="stylesheet" href="../../_static/bootstrap-sphinx.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../../_static/fa/css/all.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/css/launchcode.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/css/site.css" />
    <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <script type="text/javascript" src="../../_static/language_data.js"></script>
    <script type="text/javascript" src="../../_static/js/jquery-1.11.0.min.js"></script>
    <script type="text/javascript" src="../../_static/js/jquery-fix.js"></script>
    <script type="text/javascript" src="../../_static/bootstrap-3.3.7/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="../../_static/bootstrap-sphinx.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="6. Secrets Management &amp; Backing Services" href="../secrets-and-backing/index.html" />
    <link rel="prev" title="5.4. Walkthrough: Linux Starter App Deployment" href="walkthrough.html" />
<meta charset='utf-8'>
<meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1'>
<meta name="apple-mobile-web-app-capable" content="yes">

  </head><body class="body-bc">

<div id="navbar" class="navbar navbar-default navbar-fixed-top">
   <div class="container">
     <div class="navbar-header">
       <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
       <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
         <span class="icon-bar"></span>
         <span class="icon-bar"></span>
         <span class="icon-bar"></span>
       </button>
       <a class="navbar-brand" href="../../index.html"><span><img src="../../_static/lc-ed-logo.png" alt="LaunchCode logo"></span>
       </a>
       <span class="navbar-text navbar-version pull-left"><b></b></span>
     </div>

       <div class="collapse navbar-collapse nav-collapse">
         <ul class="nav navbar-nav">
           
           
             
           
           
           
           
           
         </ul>

         
           
<form class="navbar-form navbar-right" action="../../search.html" method="get">
 <div class="form-group">
    <label for="q" class="searchLabel">Search</label>
    <input type="text" name="q" class="form-control" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
         
       </div>
   </div>
 </div>

<ol class="breadcrumb container">
    <li><a href="../../index.html">Contents</a></li>
    <li><a href="index.html">5. Introduction to Azure and Virtual Machines</a></li>
    <li class="active">5.5. Studio: Deploy <code class="docutils literal notranslate"><span class="pre">CodingEventsAPI</span></code></li>
</ol>



<div class="container">
  <div class="row">
    <div class="col-md-10 col-md-offset-1 content ">

    
  <div class="section" id="studio-deploy-codingeventsapi">
<h1>5.5. Studio: Deploy <code class="docutils literal notranslate"><span class="pre">CodingEventsAPI</span></code><a class="headerlink" href="#studio-deploy-codingeventsapi" title="Permalink to this headline">¶</a></h1>
<p>For our studio today we will be deploying a RESTful API.</p>
<p>In our walkthrough we deployed a minimal, .NET MVC app. MVC is a design pattern in which the front end and back end are contained within the same code base. MVC has it’s pros and cons, but for the remainder of our Operations trainings we will be deploying RESTful APIs.</p>
<p>RESTful APIs are pure back-end applications; they don’t come with a front end. This typically means the RESTful API is deployed on it’s own infrastructure and then can be consumed by any number of front ends that are hosted on their own infrastructure. This separation has pros and cons. It means that you may have more infrastructure and ops work to manage. However, an advantage is that both projects live in isolation and can be developed independently of one another.</p>
<p>We won’t be developing the RESTful API from scratch since we are focusing on the operations work, but you should look over the repo of the <a class="reference external" href="https://github.com/LaunchCodeEducation/coding-events-api" target="_blank">coding-events-api<i class="fas fa-external-link-alt" aria-hidden="true"></i></a>.</p>
<div class="section" id="create-resource-group">
<h2>5.5.1. Create Resource Group<a class="headerlink" href="#create-resource-group" title="Permalink to this headline">¶</a></h2>
<p>Starting out, we will need to create a new resource group for this project. If you need a refresher refer to the previous walkthrough for how to do this.</p>
<p>The only change will be using the following pattern (<code class="docutils literal notranslate"><span class="pre">your-name-lc-rg-rest-api</span></code>) when naming your resource group.</p>
</div>
<div class="section" id="spin-up-a-vm">
<h2>5.5.2. Spin Up a VM<a class="headerlink" href="#spin-up-a-vm" title="Permalink to this headline">¶</a></h2>
<p>Just like the walkthrough you will need create an ubuntu VM.</p>
<p>Make sure your machine matches the following requirements:</p>
<ul class="simple">
<li>Resource group: <code class="docutils literal notranslate"><span class="pre">your-name-lc-rg-rest-api</span></code></li>
<li>Virtual Machine Name: <code class="docutils literal notranslate"><span class="pre">your-name-lc-vm-rest-api</span></code></li>
<li>Region: East US</li>
<li>Image: Ubuntu Server 18.04 LTS</li>
<li>Size: Standard_B2s - 2 vcpu, 4 GiB memory ($$$)</li>
<li>Authentication type: Password</li>
<li>Username: student</li>
<li>Password: <code class="docutils literal notranslate"><span class="pre">LaunchCode-&#64;zure1</span></code></li>
<li>Confirm password: <code class="docutils literal notranslate"><span class="pre">LaunchCode-&#64;zure1</span></code></li>
</ul>
</div>
<div class="section" id="configure-the-vm">
<h2>5.5.3. Configure the VM<a class="headerlink" href="#configure-the-vm" title="Permalink to this headline">¶</a></h2>
<p>After your VM spins up you will need to add the .NET SDK and <code class="docutils literal notranslate"><span class="pre">dotnet</span></code> CLI tool. Checkout the walkthrough for a reminder on how we did this using the VM <em>Run Command</em>.</p>
<p>The source code for our project is stored on GitHub, so we also need <code class="docutils literal notranslate"><span class="pre">git</span></code>. Conveniently, <code class="docutils literal notranslate"><span class="pre">git</span></code> comes pre-installed on Ubuntu.</p>
<p>You can check that <code class="docutils literal notranslate"><span class="pre">git</span></code> is installed and available to you by running <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">--version</span></code> in the VM <em>Run Command</em> window. After running this command, you should see a <code class="docutils literal notranslate"><span class="pre">git</span></code> version output like the image below.</p>
<img alt="../../_images/studio-run-command-1.png" src="../../_images/studio-run-command-1.png" />
<p>If <code class="docutils literal notranslate"><span class="pre">git</span></code> isn’t installed, simply delete this VM and create a new one making sure you selected the correct image.</p>
</div>
<div class="section" id="clone-the-source-code">
<h2>5.5.4. Clone the Source Code<a class="headerlink" href="#clone-the-source-code" title="Permalink to this headline">¶</a></h2>
<p>Our VM is essentially identical to the VM we used in the walkthrough. It has the same hardware, operating system, and tools.</p>
<p>However, we are going to be using <code class="docutils literal notranslate"><span class="pre">git</span></code> to <em>deliver</em>, or get our source code, to the machine. We still want our source code in the same base path, the <code class="docutils literal notranslate"><span class="pre">/home/student</span></code> directory.</p>
<p>For our Run Command we will need to change to the <code class="docutils literal notranslate"><span class="pre">/home/student</span></code> directory, and then clone the Git repository that contains our source code, <a class="reference external" href="https://github.com/LaunchCodeEducation/coding-events-api" target="_blank">https://github.com/LaunchCodeEducation/coding-events-api<i class="fas fa-external-link-alt" aria-hidden="true"></i></a>. We will also need to switch to the <code class="docutils literal notranslate"><span class="pre">1-sqlite</span></code> branch for today’s deployment.</p>
<p>We can check that it delivered the source code properly by running <code class="docutils literal notranslate"><span class="pre">ls</span></code> in the <code class="docutils literal notranslate"><span class="pre">coding-events-api</span></code> directory that is created after cloning the repo.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">cd</span> /home/student
git clone https://github.com/LaunchCodeEducation/coding-events-api
<span class="nb">cd</span> /home/student/coding-events-api
git checkout <span class="m">1</span>-sqlite
ls /home/student/coding-events-api
</pre></div>
</div>
<img alt="../../_images/studio-run-command-2.png" src="../../_images/studio-run-command-2.png" />
<p>Looking into the directory, we can see we have some source code. We don’t see a <code class="docutils literal notranslate"><span class="pre">.csproj</span></code> file though, and that must be present to publish our application. However, we see a nested project directory, <code class="docutils literal notranslate"><span class="pre">/home/student/coding-events-api/CodingEventsAPI</span></code>, which should contain the <code class="docutils literal notranslate"><span class="pre">.csproj</span></code> file.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>ls /home/student/coding-events-api/CodingEventsAPI
</pre></div>
</div>
<img alt="../../_images/studio-run-command-3.png" src="../../_images/studio-run-command-3.png" />
<p>In this nested project directory we can see the <code class="docutils literal notranslate"><span class="pre">CodingEventsAPI.csproj</span></code> file, so we will be able to publish this project to create our build artifacts.</p>
</div>
<div class="section" id="publish-source-code">
<h2>5.5.5. Publish Source Code<a class="headerlink" href="#publish-source-code" title="Permalink to this headline">¶</a></h2>
<p>In order to publish your project you will follow similar steps as the those in the previous walkthrough with one exception. Because the <code class="docutils literal notranslate"><span class="pre">.csproj</span></code> file is in a nested directory you will need to move to that directory before publishing.</p>
</div>
<div class="section" id="open-vm-network-security-groups-nsg">
<h2>5.5.6. Open VM Network Security Groups (NSG)<a class="headerlink" href="#open-vm-network-security-groups-nsg" title="Permalink to this headline">¶</a></h2>
<p>Similar to the walkthrough, you will need to create inbound and outbound rules for port 80 to allow traffic over the public internet.</p>
</div>
<div class="section" id="run-the-project">
<h2>5.5.7. Run the Project<a class="headerlink" href="#run-the-project" title="Permalink to this headline">¶</a></h2>
<p>After getting your NSG set up you can run the executable artifact that was published.</p>
<p>You may have to look around for it—it’s probably somewhere in the <code class="docutils literal notranslate"><span class="pre">/bin</span></code> subdirectories. Don’t forget <code class="docutils literal notranslate"><span class="pre">ls</span></code> and <code class="docutils literal notranslate"><span class="pre">cd</span></code> are your friends for finding and reaching files or directories.</p>
<p>Don’t forget to run your executable with the environment variable we set in the walkthrough <code class="docutils literal notranslate"><span class="pre">ASPNETCORE_URLS=&quot;http://*:80&quot;</span></code>. If you are hazy on how to execute the artifact using this variable, refer to the previous walkthrough.</p>
</div>
<div class="section" id="view-swagger-docs">
<h2>5.5.8. View Swagger Docs<a class="headerlink" href="#view-swagger-docs" title="Permalink to this headline">¶</a></h2>
<p>Finally, after you have run these steps navigate to your VM’s public IP address in your browser and you should see the Swagger Page to let you know your API has been successfully deployed.</p>
<img alt="../../_images/studio-final-screen.png" src="../../_images/studio-final-screen.png" />
</div>
<div class="section" id="recap">
<h2>5.5.9. Recap<a class="headerlink" href="#recap" title="Permalink to this headline">¶</a></h2>
<p>We manually deployed our application using the Azure <em>Run Command</em> console in the browser. While this was likely a time-consuming process for you, know that the techniques we will learn in future classes are much more intuitive and efficient. It is important to understand the discrete steps involved so that you understand what is going on behind the scenes when using tools that abstract these processes.</p>
</div>
</div>



    
    <nav aria-label="Next and Previous Pages">
      <ul class="pager">
        
        <li class="previous"><a href="walkthrough.html"><span aria-hidden="true">&larr;</span> 5.4. Walkthrough: Linux Starter App Deployment</a></li>
        
        
        <li class="next"><a href="../secrets-and-backing/index.html">6. Secrets Management &amp; Backing Services <span aria-hidden="true">&rarr;</span></a></li>
        
      </ul>
    </nav>
    
    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
    <p class="pull-right">
      <a href="#">Back to top</a>
      
        <br/>
        
<div id="sourcelink">
  <a href="../../_sources/chapters/azure-intro/studio.rst.txt"
     rel="nofollow">Page Source</a>
</div>
      
    </p>
    <p>
    </p>
  </div>
</footer>
  </body>
</html>
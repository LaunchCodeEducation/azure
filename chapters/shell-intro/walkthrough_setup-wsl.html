<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>1.3. Walkthrough: Set Up Linux &amp; Bash With WSL &#8212; Microsoft Azure  documentation</title>
    <link rel="stylesheet" href="../../_static/bootstrap-sphinx.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../../_static/fa/css/all.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/css/launchcode.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/css/site.css" />
    <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <script type="text/javascript" src="../../_static/language_data.js"></script>
    <script type="text/javascript" src="../../_static/js/jquery-1.11.0.min.js"></script>
    <script type="text/javascript" src="../../_static/js/jquery-fix.js"></script>
    <script type="text/javascript" src="../../_static/bootstrap-3.3.7/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="../../_static/bootstrap-sphinx.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="2. Introduction to Bash" href="../bash-intro/index.html" />
    <link rel="prev" title="1.2. Shell Fundamentals" href="shell-fundamentals.html" />
<meta charset='utf-8'>
<meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1'>
<meta name="apple-mobile-web-app-capable" content="yes">

  </head><body class="body-bc">

<div id="navbar" class="navbar navbar-default navbar-fixed-top">
   <div class="container">
     <div class="navbar-header">
       <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
       <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
         <span class="icon-bar"></span>
         <span class="icon-bar"></span>
         <span class="icon-bar"></span>
       </button>
       <a class="navbar-brand" href="../../index.html"><span><img src="../../_static/lc-ed-logo.png" alt="LaunchCode logo"></span>
       </a>
       <span class="navbar-text navbar-version pull-left"><b></b></span>
     </div>

       <div class="collapse navbar-collapse nav-collapse">
         <ul class="nav navbar-nav">
           
           
             
           
           
           
           
           
         </ul>

         
           
<form class="navbar-form navbar-right" action="../../search.html" method="get">
 <div class="form-group">
    <label for="q" class="searchLabel">Search</label>
    <input type="text" name="q" class="form-control" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
         
       </div>
   </div>
 </div>

<ol class="breadcrumb container">
    <li><a href="../../index.html">Contents</a></li>
    <li><a href="index.html">1. Introduction to CLI Shells</a></li>
    <li class="active">1.3. Walkthrough: Set Up Linux &amp; Bash With WSL</li>
</ol>



<div class="container">
  <div class="row">
    <div class="col-md-10 col-md-offset-1 content ">

    
  <div class="section" id="walkthrough-set-up-linux-bash-with-wsl">
<span id="cli-setup"></span><h1>1.3. Walkthrough: Set Up Linux &amp; Bash With WSL<a class="headerlink" href="#walkthrough-set-up-linux-bash-with-wsl" title="Permalink to this headline">¶</a></h1>
<div class="section" id="windows-subsytem-for-linux">
<h2>1.3.1. Windows Subsytem for Linux<a class="headerlink" href="#windows-subsytem-for-linux" title="Permalink to this headline">¶</a></h2>
<p>Windows machines can not run Bash natively because of their OS incompatibility. However, Microsoft has released the <strong>Windows Subsystem for Linux</strong> (WSL) which simulates the Linux Kernel. The WSL is a type of <strong>Virtual Machine</strong> (VM) which, as the name implies, is a virtual computer that runs within a <strong>Physical Machine</strong> such as your laptop.</p>
<p>Once WSL is enabled you can install a Linux Distribution like Ubuntu and use it as if it were a physical machine. In order to enable WSL and practice in the following chapter you will need to install Ubuntu and Bash through the following steps.</p>
<div class="admonition-warning admonition">
<p class="first admonition-title"><i class="fas fa-exclamation-triangle" aria-hidden="true"></i>Warning</p>
<p class="last">The WSL is only available for machines running Windows 10. Specifically you must be on <strong>Version 2004, Build 19041</strong> or higher. You can check what version you are on by following the <a class="reference external" href="https://support.microsoft.com/en-us/help/13443/windows-which-version-am-i-running" target="_blank">instructions in this article<i class="fas fa-external-link-alt" aria-hidden="true"></i></a>.</p>
</div>
</div>
<div class="section" id="enable-wsl">
<h2>1.3.2. Enable WSL<a class="headerlink" href="#enable-wsl" title="Permalink to this headline">¶</a></h2>
<p>The first step requires you to open the PowerShell Terminal in <strong>admin mode</strong>. You can find PowerShell by searching from your taskbar.</p>
<div class="admonition-tip admonition">
<p class="first admonition-title"><i class="fas fa-lightbulb" aria-hidden="true"></i>Tip</p>
<p>Before opening it right-click the icon and select <strong>pin to taskbar</strong> so it is easier to reach in the future:</p>
<img alt="Search for PowerShell in Windows taskbar" class="last" src="../../_images/powershell-taskbar-search.png" />
</div>
<p>From your taskbar right-click on the pinned icon and select <strong>run as administrator</strong>:</p>
<img alt="Open PowerShell as admin" src="../../_images/powershell-open-as-admin.png" />
<p>Opening PowerShell normally will open it with User privileges with security restrictions. When you run a Shell as an admin you have <strong>elevated privileges</strong> that allow you to control the OS without restriction. In order to enable WSL we will need these elevated privileges.</p>
<div class="admonition-warning admonition">
<p class="first admonition-title"><i class="fas fa-exclamation-triangle" aria-hidden="true"></i>Warning</p>
<p>When operating a Shell with admin privileges you <strong>must be careful with the actions you take</strong>. While it is unlikely, you <strong>can do irreparable damage</strong> from the command-line by controlling areas of your machine that the Desktop GUI would normally prevent you from accessing.</p>
<p class="last">All of the instructions provided in this class are safe <strong>as long as you follow them exactly</strong>. While we encourage you to research and practice outside of class we can not help you with anything harmful you do to your machine when straying from the directions we provide. Use common sense and don’t run scripts or commands you find on the internet without knowing exactly what they do!</p>
</div>
<p>You will be prompted to confirm this decision as a security measure:</p>
<img alt="PowerShell admin security prompt" src="../../_images/powershell-admin-prompt.png" />
<p>With PowerShell open as an admin copy and paste the following commands. Recall that the <code class="docutils literal notranslate"><span class="pre">&gt;</span></code> symbol is used to designate <strong>a single PowerShell command</strong> (the contents to the right of it) that you need to copy and paste into your Terminal.</p>
<div class="literal-block-wrapper docutils container" id="id1">
<div class="code-block-caption"><span class="caption-text">Windows/PowerShell</span><a class="headerlink" href="#id1" title="Permalink to this code">¶</a></div>
<div class="highlight-powershell notranslate"><div class="highlight"><pre><span></span>&gt; dism.exe /online /enable-feature /featurename:Microsoft-Windows-Subsystem-Linux /all /norestart
</pre></div>
</div>
</div>
<p>This command will invoke the Deployment Image Servicing and Management (<code class="docutils literal notranslate"><span class="pre">dism</span></code>) tool to enable the WSL feature. Once it has finished you need to <strong>restart your machine</strong> before continuing to the following steps.</p>
</div>
<div class="section" id="setup-ubuntu">
<h2>1.3.3. Setup Ubuntu<a class="headerlink" href="#setup-ubuntu" title="Permalink to this headline">¶</a></h2>
<p>Next enter the following commands to install Ubuntu (the <strong>18.04 LTS</strong> version). As a reminder, each line beginning with <code class="docutils literal notranslate"><span class="pre">&gt;</span></code> is its own command:</p>
<div class="literal-block-wrapper docutils container" id="id2">
<div class="code-block-caption"><span class="caption-text">Windows/PowerShell</span><a class="headerlink" href="#id2" title="Permalink to this code">¶</a></div>
<div class="highlight-powershell notranslate"><div class="highlight"><pre><span></span># download the Ubuntu OS installer and save it as Ubuntu.appx
&gt; Invoke-WebRequest -Uri https://aka.ms/wsl-ubuntu-1804 -OutFile Ubuntu.appx -UseBasicParsing

# execute the Ubuntu installer application file
&gt; .\Ubuntu.appx
</pre></div>
</div>
</div>
<p>A dialog box will ask you to confirm the installation:</p>
<img alt="Install Ubuntu dialog" src="../../_images/ubuntu-install-dialog.png" />
<p>The Ubuntu VM should now open automatically. It will then take a few minutes to complete the installation.</p>
<div class="admonition-note admonition">
<p class="first admonition-title"><i class="fas fa-sticky-note" aria-hidden="true"></i>Note</p>
<p class="last">If you have any issues with the installation you likely forgot to restart your machine after enabling WSL. For resolving other issues refer to <a class="reference external" href="https://docs.microsoft.com/en-us/windows/wsl/install-win10#troubleshooting-installation" target="_blank">this troubleshooting article<i class="fas fa-external-link-alt" aria-hidden="true"></i></a>.</p>
</div>
<p>While waiting for it to install right click on its icon and pin it to your taskbar:</p>
<img alt="Pin Ubuntu VM to taskbar" src="../../_images/ubuntu-pin-taskbar.png" />
<p>After installation it will prompt you to enter a username and password for your Ubuntu user account:</p>
<img alt="Ubuntu first time setup user account" src="../../_images/ubuntu-setup-user.png" />
<p>You can set up any number of VMs and customize them to your needs. However, for this class we will use the following values to make troubleshooting and helping you more consistent.</p>
<div class="admonition-note admonition">
<p class="first admonition-title"><i class="fas fa-sticky-note" aria-hidden="true"></i>Note</p>
<p>When pasting or typing the password the characters will be hidden. Make sure to use these exact values:</p>
<ul class="last simple">
<li><strong>username</strong>: <code class="docutils literal notranslate"><span class="pre">student</span></code></li>
<li><strong>password</strong>: <code class="docutils literal notranslate"><span class="pre">launchcode</span></code></li>
</ul>
</div>
<p>You will then be presented with Bash running on the Ubuntu Terminal!</p>
<img alt="Ubuntu Bash Terminal" src="../../_images/ubuntu-bash-terminal.png" />
<p>As you likely noticed, this version of Ubuntu is <strong>headless</strong> meaning it only includes a Terminal GUI running Bash. While Ubuntu also comes in a Desktop edition with the full GUI Shell it is only used for consumers. When working with Linux VMs in the cloud we will always use headless OS installations and work exclusively from the Terminal. We will first get some practice with a <em>local</em> VM before venturing into <em>remote</em> VMs in the cloud.</p>
</div>
<div class="section" id="managing-the-ubuntu-vm">
<h2>1.3.4. Managing the Ubuntu VM<a class="headerlink" href="#managing-the-ubuntu-vm" title="Permalink to this headline">¶</a></h2>
<p>When you want to close the Ubuntu VM just type <code class="docutils literal notranslate"><span class="pre">exit</span></code> into the prompt. The <code class="docutils literal notranslate"><span class="pre">exit</span></code> command exits the active Shell process. While this appears to shut down Ubuntu, WSL will continue to run the VM in the background so that it starts up quickly the next time you need it.</p>
<p>You can practice this now by entering the following command:</p>
<div class="literal-block-wrapper docutils container" id="id3">
<div class="code-block-caption"><span class="caption-text">Linux/Bash</span><a class="headerlink" href="#id3" title="Permalink to this code">¶</a></div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ <span class="nb">exit</span>
</pre></div>
</div>
</div>
<p>To re-open Ubuntu just select the taskbar icon that you pinned earlier.</p>
</div>
<div class="section" id="working-with-wsl">
<h2>1.3.5. Working with WSL<a class="headerlink" href="#working-with-wsl" title="Permalink to this headline">¶</a></h2>
<p>WSL is designed to manage any number of VMs. Each VM uses a <strong>system image</strong> which contains the OS files used by the virtual machine. In the context of Linux, WSL refers to these images as <strong>distributions</strong>.</p>
<div class="section" id="viewing-available-distributions">
<h3>1.3.5.1. Viewing available distributions<a class="headerlink" href="#viewing-available-distributions" title="Permalink to this headline">¶</a></h3>
<p>You can view the available WSL distributions installed on your machine by using the <code class="docutils literal notranslate"><span class="pre">--list</span></code> option:</p>
<div class="literal-block-wrapper docutils container" id="id4">
<div class="code-block-caption"><span class="caption-text">Windows/PowerShell</span><a class="headerlink" href="#id4" title="Permalink to this code">¶</a></div>
<div class="highlight-powershell notranslate"><div class="highlight"><pre><span></span><span class="c"># list all the installed VM distributions</span>
<span class="p">&gt;</span> <span class="n">wsl</span> <span class="p">-</span><span class="n">-list</span>

<span class="c"># list just the running VMs</span>
<span class="p">&gt;</span> <span class="n">wsl</span> <span class="p">-</span><span class="n">-list</span> <span class="p">-</span><span class="n">-running</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="entering-a-vm-shell-directly">
<h3>1.3.5.2. Entering a VM Shell directly<a class="headerlink" href="#entering-a-vm-shell-directly" title="Permalink to this headline">¶</a></h3>
<p>You can also enter the Shell of the VM directly from the PowerShell Terminal rather than using the Ubuntu Terminal GUI. This feature is convenient as it does not require you switch between application windows.</p>
<p>You can use the <code class="docutils literal notranslate"><span class="pre">--distribution</span></code> option followed by the name of the VM’s distribution (one that is installed from the <code class="docutils literal notranslate"><span class="pre">--list</span></code> output) to enter the Shell directly:</p>
<div class="literal-block-wrapper docutils container" id="id5">
<div class="code-block-caption"><span class="caption-text">Windows/PowerShell</span><a class="headerlink" href="#id5" title="Permalink to this code">¶</a></div>
<div class="highlight-powershell notranslate"><div class="highlight"><pre><span></span><span class="c"># start the machine in the PowerShell Terminal (instead of using the taskbar icon)</span>
<span class="p">&gt;</span> <span class="n">wsl</span> <span class="p">-</span><span class="n">-distribution</span> <span class="n">Ubuntu</span><span class="p">-</span><span class="n">18</span><span class="p">.</span><span class="n">04</span>
<span class="c"># shorthand -d</span>
<span class="p">&gt;</span> <span class="n">wsl</span> <span class="n">-d</span> <span class="n">Ubuntu</span><span class="p">-</span><span class="n">18</span><span class="p">.</span><span class="n">04</span>
</pre></div>
</div>
</div>
<p>The same concept of using the Bash <code class="docutils literal notranslate"><span class="pre">exit</span></code> command applies but will now return you to the PowerShell Terminal instead of closing the Ubuntu Terminal application.</p>
<div class="admonition-note admonition">
<p class="first admonition-title"><i class="fas fa-sticky-note" aria-hidden="true"></i>Note</p>
<p>When entering Bash through PowerShell rather than the Ubuntu taskbar icon it will open to a different starting directory like <code class="docutils literal notranslate"><span class="pre">/mnt/c/Users/&lt;username&gt;</span></code>. This is <em>not the home directory</em> but is a default when entering through PowerShell.</p>
<p class="last">This behavior can be changed by creating a <code class="docutils literal notranslate"><span class="pre">.bash_profile</span></code> file. You can read more about it <a class="reference external" href="https://www.thegeekdiary.com/what-is-the-purpose-of-bash_profile-file-under-user-home-directory-in-linux/" target="_blank">in this article<i class="fas fa-external-link-alt" aria-hidden="true"></i></a> but it falls outside of the scope of this class.</p>
</div>
</div>
<div class="section" id="shutting-down-a-vm">
<h3>1.3.5.3. Shutting down a VM<a class="headerlink" href="#shutting-down-a-vm" title="Permalink to this headline">¶</a></h3>
<p>In some cases you want to completely shut down a VM rather than just exiting the active Shell session. For example, you may find that your computer is running slow and want to free up some memory. Unless you need to free up resources it is fine to leave the Ubuntu VM running in the background.</p>
<p>You can shut down a VM from the PowerShell Terminal by using the <code class="docutils literal notranslate"><span class="pre">--terminate</span></code> option followed by the name of the VM’s distribution (<code class="docutils literal notranslate"><span class="pre">Ubuntu-18.04</span></code>):</p>
<div class="literal-block-wrapper docutils container" id="id6">
<div class="code-block-caption"><span class="caption-text">Windows/PowerShell</span><a class="headerlink" href="#id6" title="Permalink to this code">¶</a></div>
<div class="highlight-powershell notranslate"><div class="highlight"><pre><span></span><span class="c"># shut down the machine</span>
<span class="p">&gt;</span> <span class="n">wsl</span> <span class="p">-</span><span class="n">-terminate</span> <span class="n">Ubuntu</span><span class="p">-</span><span class="n">18</span><span class="p">.</span><span class="n">04</span>
<span class="c"># shorthand -t</span>
<span class="p">&gt;</span> <span class="n">wsl</span> <span class="n">-t</span> <span class="n">Ubuntu</span><span class="p">-</span><span class="n">18</span><span class="p">.</span><span class="n">04</span>
</pre></div>
</div>
</div>
</div>
</div>
</div>



    
    <nav aria-label="Next and Previous Pages">
      <ul class="pager">
        
        <li class="previous"><a href="shell-fundamentals.html"><span aria-hidden="true">&larr;</span> 1.2. Shell Fundamentals</a></li>
        
        
        <li class="next"><a href="../bash-intro/index.html">2. Introduction to Bash <span aria-hidden="true">&rarr;</span></a></li>
        
      </ul>
    </nav>
    
    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
    <p class="pull-right">
      <a href="#">Back to top</a>
      
        <br/>
        
<div id="sourcelink">
  <a href="../../_sources/chapters/shell-intro/walkthrough_setup-wsl.rst.txt"
     rel="nofollow">Page Source</a>
</div>
      
    </p>
    <p>
    </p>
  </div>
</footer>
  </body>
</html>
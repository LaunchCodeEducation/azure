<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>2.6. Walkthrough: Working With a Package Manager in Bash &#8212; Microsoft Azure  documentation</title>
    <link rel="stylesheet" href="../../_static/bootstrap-sphinx.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../../_static/fa/css/all.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/css/launchcode.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/css/site.css" />
    <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <script type="text/javascript" src="../../_static/language_data.js"></script>
    <script type="text/javascript" src="../../_static/js/jquery-1.11.0.min.js"></script>
    <script type="text/javascript" src="../../_static/js/jquery-fix.js"></script>
    <script type="text/javascript" src="../../_static/bootstrap-3.3.7/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="../../_static/bootstrap-sphinx.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="3. Introduction to Web APIs &amp; REST" href="../web-apis/index.html" />
    <link rel="prev" title="2.5. Walkthrough: Substitutions &amp; Scripting in Bash" href="walkthrough_substitution-scripting.html" />
<meta charset='utf-8'>
<meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1'>
<meta name="apple-mobile-web-app-capable" content="yes">

  </head><body class="body-bc">

<div id="navbar" class="navbar navbar-default navbar-fixed-top">
   <div class="container">
     <div class="navbar-header">
       <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
       <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
         <span class="icon-bar"></span>
         <span class="icon-bar"></span>
         <span class="icon-bar"></span>
       </button>
       <a class="navbar-brand" href="../../index.html"><span><img src="../../_static/lc-ed-logo.png" alt="LaunchCode logo"></span>
       </a>
       <span class="navbar-text navbar-version pull-left"><b></b></span>
     </div>

       <div class="collapse navbar-collapse nav-collapse">
         <ul class="nav navbar-nav">
           
           
             
           
           
           
           
           
         </ul>

         
           
<form class="navbar-form navbar-right" action="../../search.html" method="get">
 <div class="form-group">
    <label for="q" class="searchLabel">Search</label>
    <input type="text" name="q" class="form-control" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
         
       </div>
   </div>
 </div>

<ol class="breadcrumb container">
    <li><a href="../../index.html">Contents</a></li>
    <li><a href="index.html">2. Introduction to Bash</a></li>
    <li class="active">2.6. Walkthrough: Working With a Package Manager in Bash</li>
</ol>



<div class="container">
  <div class="row">
    <div class="col-md-10 col-md-offset-1 content ">

    
  <div class="section" id="walkthrough-working-with-a-package-manager-in-bash">
<h1>2.6. Walkthrough: Working With a Package Manager in Bash<a class="headerlink" href="#walkthrough-working-with-a-package-manager-in-bash" title="Permalink to this headline">¶</a></h1>
<p>Bash comes pre-installed with many essential programs. But when you need to install other tools a package manager can make the process fast and easy. While we will not be doing any <em>local</em> development in Bash and Linux we will eventually configure <em>remote</em> VMs in Azure. To that end we will be working with the <code class="docutils literal notranslate"><span class="pre">apt</span></code> package manager in the Ubuntu VM for practice before venturing into the cloud.</p>
<div class="section" id="the-apt-package-manager">
<h2>2.6.1. The APT Package Manager<a class="headerlink" href="#the-apt-package-manager" title="Permalink to this headline">¶</a></h2>
<p>The Ubuntu Distribution comes pre-installed with the Advanced Packaging Tool (<code class="docutils literal notranslate"><span class="pre">apt</span></code>) program for managing packages. We will focus on the commands that are used most frequently. Like most CLI programs you can view more details about how to use <code class="docutils literal notranslate"><span class="pre">apt</span></code> by using the <code class="docutils literal notranslate"><span class="pre">--help</span></code> option.</p>
<div class="admonition-tip admonition">
<p class="first admonition-title"><i class="fas fa-lightbulb" aria-hidden="true"></i>Tip</p>
<p>You will typically see <code class="docutils literal notranslate"><span class="pre">apt</span></code> used with the <code class="docutils literal notranslate"><span class="pre">-y</span></code> option added to the command. This option skips the confirmation prompt, like a popup confirmation you would see in a GUI, for the actions you are taking to speed up the process.</p>
<div class="literal-block-wrapper last docutils container" id="id1">
<div class="code-block-caption"><span class="caption-text">Linux/Bash</span><a class="headerlink" href="#id1" title="Permalink to this code">¶</a></div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ apt &lt;action argument&gt; -y
</pre></div>
</div>
</div>
</div>
<div class="section" id="sudo">
<h3>2.6.1.1. SUDO<a class="headerlink" href="#sudo" title="Permalink to this headline">¶</a></h3>
<p>Recall that APT, like all system-wide package managers, must have control over your machine to download, install and configure the packages you need. Because it operates on packages stored above the <code class="docutils literal notranslate"><span class="pre">/home/&lt;username&gt;</span></code> directory (closer to the root dir) it is considered <em>outside of the user space</em> and requires the use of admin privileges:</p>
<div class="literal-block-wrapper docutils container" id="id2">
<div class="code-block-caption"><span class="caption-text">Linux/Bash</span><a class="headerlink" href="#id2" title="Permalink to this code">¶</a></div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ sudo apt &lt;action argument&gt; -y
</pre></div>
</div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">sudo</span></code> command is the equivalent of opening the PowerShell Terminal in admin mode. It is an acronym for <strong>S</strong>ubstitute <strong>U</strong>ser to <strong>DO</strong> the command to the right of it. When used without specifying <em>which user to substitute</em> it will default to running the command to the right as the <code class="docutils literal notranslate"><span class="pre">root</span></code> user – a special super user account type.</p>
<div class="admonition-fun-fact admonition">
<p class="first admonition-title"><i class="fas fa-rocket" aria-hidden="true"></i>Fun Fact</p>
<p class="last">SUDO is often referred to as <em>super user do</em> because of how often it is used to run commands as root. Most people pronounce it <em>soo-doo</em> or <strong>soo-doh</strong>.</p>
</div>
<p>The first time you use <code class="docutils literal notranslate"><span class="pre">sudo</span></code> <em>per Shell session</em> you will be prompted for the admin password of your account (<code class="docutils literal notranslate"><span class="pre">launchcode</span></code> in our case). In simple terms a Shell session is one <strong>independent instance</strong> of a Shell like Bash. In other words, if you were to open a Terminal and then open another one you would have two active Shell sessions.</p>
<p>Once you have authenticated you will not have to re-authenticate unless you close the Shell (ending the session) or you open a new Shell in a different Terminal window (a new session). You can liken this behavior to how PowerShell requires you to right-click and open as an admin for each Shell session that requires elevated privileges.</p>
</div>
<div class="section" id="updating-repository-sources">
<h3>2.6.1.2. Updating repository sources<a class="headerlink" href="#updating-repository-sources" title="Permalink to this headline">¶</a></h3>
<p>Any time you are going to use <code class="docutils literal notranslate"><span class="pre">apt</span></code> you should begin by updating the metadata in the repository sources. An <code class="docutils literal notranslate"><span class="pre">apt</span> <span class="pre">update</span></code> will download information about installed packages (like pending upgrades) as well as refresh the package source lists. The latter half  of the update ensures that when you search and install packages you are always getting the latest additions and versions from your package source repositories.</p>
<p>Below you can see the most ubiquitous <code class="docutils literal notranslate"><span class="pre">apt</span></code> command in use:</p>
<div class="literal-block-wrapper docutils container" id="id3">
<div class="code-block-caption"><span class="caption-text">Linux/Bash</span><a class="headerlink" href="#id3" title="Permalink to this code">¶</a></div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ sudo apt update
<span class="c1"># information about repository source updates</span>
</pre></div>
</div>
</div>
<div class="admonition-note admonition">
<p class="first admonition-title"><i class="fas fa-sticky-note" aria-hidden="true"></i>Note</p>
<p class="last">Updating the repository sources <strong>only updates the metadata about packages</strong>. The actual installed packages can be <strong>upgraded to the latest version</strong> using the <code class="docutils literal notranslate"><span class="pre">apt</span> <span class="pre">upgrade</span></code> command.</p>
</div>
</div>
</div>
<div class="section" id="installing-cli-tools">
<h2>2.6.2. Installing CLI Tools<a class="headerlink" href="#installing-cli-tools" title="Permalink to this headline">¶</a></h2>
<p>After you have updated you can search for and install package tools on your machine. The <code class="docutils literal notranslate"><span class="pre">search</span></code> argument can be used to scan the source repositories for a package. It accepts a search term as a sub-argument which it will use to search the title and descriptions of all the available packages within your group of sources.</p>
<div class="literal-block-wrapper docutils container" id="id4">
<div class="code-block-caption"><span class="caption-text">Linux/Bash</span><a class="headerlink" href="#id4" title="Permalink to this code">¶</a></div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># always run apt update before searching or installing!</span>
$ sudo apt search &lt;search term&gt;
</pre></div>
</div>
</div>
<p>If the search results contains your package you can install it using the <code class="docutils literal notranslate"><span class="pre">install</span></code> argument. The sub-argument is the <strong>exact package name</strong> of the tool you want to install. The installation prompts (like confirmation dialog boxes in a GUI) can be automatically accepted using the <code class="docutils literal notranslate"><span class="pre">-y</span></code> option:</p>
<div class="literal-block-wrapper docutils container" id="id5">
<div class="code-block-caption"><span class="caption-text">Linux/Bash</span><a class="headerlink" href="#id5" title="Permalink to this code">¶</a></div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ sudo apt install &lt;package name&gt; -y
</pre></div>
</div>
</div>
<div class="section" id="install-your-first-package">
<h3>2.6.2.1. Install your first package<a class="headerlink" href="#install-your-first-package" title="Permalink to this headline">¶</a></h3>
<p>Let’s practice by searching for the amusing little tool called Cow Say. First let’s search for the package by its name, <code class="docutils literal notranslate"><span class="pre">cowsay</span></code>. This package is available within the default set of source repositories and should show up as the first result:</p>
<div class="literal-block-wrapper docutils container" id="id6">
<div class="code-block-caption"><span class="caption-text">Linux/Bash</span><a class="headerlink" href="#id6" title="Permalink to this code">¶</a></div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ sudo apt update

<span class="c1"># searching doesn&#39;t require elevated privileges</span>
$ apt search cowsay

Sorting... Done
Full Text Search... Done
cowsay/focal,focal <span class="m">3</span>.03+dfsg2-7 all
configurable talking cow

cowsay-off/focal,focal <span class="m">3</span>.03+dfsg2-7 all
configurable talking cow <span class="o">(</span>offensive cows<span class="o">)</span>

presentty/focal,focal <span class="m">0</span>.2.1-1.1 all
Console-based presentation software

xcowsay/focal <span class="m">1</span>.5-1 amd64
Graphical configurable talking cow

<span class="c1"># you can also search for &quot;talking cow&quot; which will match the description</span>
$ apt search talking cow
</pre></div>
</div>
</div>
<p>The package that we want is the first one, <code class="docutils literal notranslate"><span class="pre">cowsay</span></code>. Notice that the search will check both the package name and description.</p>
<p>Let’s install it using the <strong>exact package name</strong>, <code class="docutils literal notranslate"><span class="pre">cowsay</span></code>:</p>
<div class="literal-block-wrapper docutils container" id="id7">
<div class="code-block-caption"><span class="caption-text">Linux/Bash</span><a class="headerlink" href="#id7" title="Permalink to this code">¶</a></div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># installing controls your machine and requires sudo</span>
$ sudo apt install cowsay -y
</pre></div>
</div>
</div>
<p>In the command output you can see that <code class="docutils literal notranslate"><span class="pre">apt</span></code> downloads, unpacks and installs the package automatically . You can now try out the newly installed tool!</p>
<p>Use the command program <code class="docutils literal notranslate"><span class="pre">cowsay</span></code> and enter a message as its arguments:</p>
<div class="literal-block-wrapper docutils container" id="id8">
<div class="code-block-caption"><span class="caption-text">Linux/Bash</span><a class="headerlink" href="#id8" title="Permalink to this code">¶</a></div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ cowsay Hello World!
</pre></div>
</div>
</div>
<div class="admonition-note admonition">
<p class="first admonition-title"><i class="fas fa-sticky-note" aria-hidden="true"></i>Note</p>
<p>It is okay to leave <code class="docutils literal notranslate"><span class="pre">cowsay</span></code> installed. But if you would like to remove it you can use <code class="docutils literal notranslate"><span class="pre">apt</span></code> to cleanly uninstall it:</p>
<div class="literal-block-wrapper last docutils container" id="id9">
<div class="code-block-caption"><span class="caption-text">Linux/Bash</span><a class="headerlink" href="#id9" title="Permalink to this code">¶</a></div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ sudo apt remove cowsay -y
</pre></div>
</div>
</div>
</div>
</div>
</div>
<div class="section" id="adding-custom-sources">
<h2>2.6.3. Adding custom sources<a class="headerlink" href="#adding-custom-sources" title="Permalink to this headline">¶</a></h2>
<p>The default list of package repositories provides access to a large collection of open-source tools from package hosts trusted by the open source community. But in many cases you will need to install additional sources to download packages from. Additional sources can range from private repositories hosted by a company, for internal use, to independently-hosted repositories like the Microsoft packages repository.</p>
<p>These custom repositories often require both the repository and a <strong>signing key</strong> to be installed. Anyone is able to host a repository of packages. This is why it is important to only install source repositories, and packages from those repositories, from trusted sources.</p>
<p>As an additional security measure, trusted repositories include a signing key to check that downloaded packages are authentic (from a trusted source) before being installed.</p>
<div class="admonition-note admonition">
<p class="first admonition-title"><i class="fas fa-sticky-note" aria-hidden="true"></i>Note</p>
<p class="last">The topics of Public Key Infrastructure (PKI), which includes signing keys, and custom repositories extends outside the scope of this course. You can read more about how these work <a class="reference external" href="https://wiki.debian.org/DebianRepository" target="_blank">in this repository article<i class="fas fa-external-link-alt" aria-hidden="true"></i></a> and <a class="reference external" href="https://wiki.debian.org/SecureApt" target="_blank">this repository signing key article<i class="fas fa-external-link-alt" aria-hidden="true"></i></a>. Both of these articles offer an overview of the mechanisms involved from a relatively high level.</p>
</div>
<div class="section" id="installing-net">
<h3>2.6.3.1. Installing .NET<a class="headerlink" href="#installing-net" title="Permalink to this headline">¶</a></h3>
<p>Let’s see what this process looks like using the <code class="docutils literal notranslate"><span class="pre">dotnet</span> <span class="pre">CLI</span></code> installation as an example.</p>
<div class="admonition-tip admonition">
<p class="first admonition-title"><i class="fas fa-lightbulb" aria-hidden="true"></i>Tip</p>
<p class="last">Like other 3rd party tool installations you can find the instructions on the package maintainer’s site. For example, we will be following the instructions from this <a class="reference external" href="https://docs.microsoft.com/en-us/dotnet/core/install/linux-ubuntu#1804-" target="_blank">Microsoft installation article<i class="fas fa-external-link-alt" aria-hidden="true"></i></a>.</p>
</div>
<p>The first step is to install the official Microsoft package repository. The installation includes both the repository and the signing key. This is a one-time process and future installations of Microsoft tools will be available and trusted automatically:</p>
<div class="literal-block-wrapper docutils container" id="id10">
<div class="code-block-caption"><span class="caption-text">Linux/Bash</span><a class="headerlink" href="#id10" title="Permalink to this code">¶</a></div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># install the repository source package (includes the repo and signing key)</span>
$ sudo wget https://packages.microsoft.com/config/ubuntu/18.04/packages-microsoft-prod.deb -O packages-microsoft-prod.deb

<span class="c1"># unpack and install the repository and trust the signing key</span>
$ sudo dpkg -i packages-microsoft-prod.deb
</pre></div>
</div>
</div>
<p>Microsoft only serves their packages over secure connections (HTTPS). We will need to install a utility called <code class="docutils literal notranslate"><span class="pre">apt-transport-https</span></code> which, as the name implies, is used to download over HTTPS:</p>
<div class="literal-block-wrapper docutils container" id="id11">
<div class="code-block-caption"><span class="caption-text">Linux/Bash</span><a class="headerlink" href="#id11" title="Permalink to this code">¶</a></div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># always update before other commands</span>
$ sudo apt update

$ sudo apt install apt-transport-https -y
</pre></div>
</div>
</div>
<p>Finally with the repository, signing key, and HTTPS tooling installed we can install the <code class="docutils literal notranslate"><span class="pre">dotnet</span></code> package we were after. We will install the .NET Core SDK which includes both the SDK (standard library, compiler and runtime) as well as the <code class="docutils literal notranslate"><span class="pre">dotnet</span></code> CLI tool itself:</p>
<div class="literal-block-wrapper docutils container" id="id12">
<div class="code-block-caption"><span class="caption-text">Linux/Bash</span><a class="headerlink" href="#id12" title="Permalink to this code">¶</a></div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ sudo apt update
$ sudo apt install dotnet-sdk-3.1 -y
</pre></div>
</div>
</div>
<p>From the output you can see all of the work that <code class="docutils literal notranslate"><span class="pre">apt</span></code> does automatically. Imagine doing all of that downloading, unpacking and configuration manually!</p>
<p>You can confirm the installation was successful by viewing the <code class="docutils literal notranslate"><span class="pre">--help</span></code> output of <code class="docutils literal notranslate"><span class="pre">dotnet</span></code>. Viewing the help output of a command program is an easy way to get acquainted with it right from the command-line.</p>
<div class="literal-block-wrapper docutils container" id="id13">
<div class="code-block-caption"><span class="caption-text">Linux/Bash</span><a class="headerlink" href="#id13" title="Permalink to this code">¶</a></div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ dotnet --help
</pre></div>
</div>
</div>
<div class="admonition-tip admonition">
<p class="first admonition-title"><i class="fas fa-lightbulb" aria-hidden="true"></i>Tip</p>
<p class="last">We will work with the <code class="docutils literal notranslate"><span class="pre">dotnet</span> <span class="pre">CLI</span></code> extensively in later lessons. But feel free to poke around with it in the mean time.</p>
</div>
</div>
</div>
</div>



    
    <nav aria-label="Next and Previous Pages">
      <ul class="pager">
        
        <li class="previous"><a href="walkthrough_substitution-scripting.html"><span aria-hidden="true">&larr;</span> 2.5. Walkthrough: Substitutions &amp; Scripting in Bash</a></li>
        
        
        <li class="next"><a href="../web-apis/index.html">3. Introduction to Web APIs &amp; REST <span aria-hidden="true">&rarr;</span></a></li>
        
      </ul>
    </nav>
    
    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
    <p class="pull-right">
      <a href="#">Back to top</a>
      
        <br/>
        
<div id="sourcelink">
  <a href="../../_sources/chapters/bash-intro/walkthrough_cli-tools.rst.txt"
     rel="nofollow">Page Source</a>
</div>
      
    </p>
    <p>
    </p>
  </div>
</footer>
  </body>
</html>
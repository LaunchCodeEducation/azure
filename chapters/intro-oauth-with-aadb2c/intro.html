<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>7.1. Introduction and Key Concepts &#8212; Microsoft Azure  documentation</title>
    <link rel="stylesheet" href="../../_static/bootstrap-sphinx.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../../_static/fa/css/all.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/css/launchcode.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/css/site.css" />
    <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <script type="text/javascript" src="../../_static/language_data.js"></script>
    <script type="text/javascript" src="../../_static/js/jquery-1.11.0.min.js"></script>
    <script type="text/javascript" src="../../_static/js/jquery-fix.js"></script>
    <script type="text/javascript" src="../../_static/bootstrap-3.3.7/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="../../_static/bootstrap-sphinx.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="7.2. Walkthrough: Explore OAuth &amp; OIDC" href="walkthrough_oauth-oidc.html" />
    <link rel="prev" title="7. Introduction to Authentication &amp; Authorization with Azure AD B2C" href="index.html" />
<meta charset='utf-8'>
<meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1'>
<meta name="apple-mobile-web-app-capable" content="yes">

  </head><body class="body-bc">

<div id="navbar" class="navbar navbar-default navbar-fixed-top">
   <div class="container">
     <div class="navbar-header">
       <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
       <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
         <span class="icon-bar"></span>
         <span class="icon-bar"></span>
         <span class="icon-bar"></span>
       </button>
       <a class="navbar-brand" href="../../index.html"><span><img src="../../_static/lc-ed-logo.png" alt="LaunchCode logo"></span>
       </a>
       <span class="navbar-text navbar-version pull-left"><b></b></span>
     </div>

       <div class="collapse navbar-collapse nav-collapse">
         <ul class="nav navbar-nav">
           
           
             
           
           
           
           
           
         </ul>

         
           
<form class="navbar-form navbar-right" action="../../search.html" method="get">
 <div class="form-group">
    <label for="q" class="searchLabel">Search</label>
    <input type="text" name="q" class="form-control" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
         
       </div>
   </div>
 </div>

<ol class="breadcrumb container">
    <li><a href="../../index.html">Contents</a></li>
    <li><a href="index.html">7. Introduction to Authentication &amp; Authorization with Azure AD B2C</a></li>
    <li class="active">7.1. Introduction and Key Concepts</li>
</ol>



<div class="container">
  <div class="row">
    <div class="col-md-10 col-md-offset-1 content ">

    
  <div class="section" id="introduction-and-key-concepts">
<h1>7.1. Introduction and Key Concepts<a class="headerlink" href="#introduction-and-key-concepts" title="Permalink to this headline">¶</a></h1>
<p>Until this point all of the endpoints of our Coding Events API have been <em>publicly accessible</em>. In this chapter we will introduce <strong>authentication</strong> and <strong>authorization</strong> along with several ubiquitous <strong>protocols</strong> that describe how to perform each of these processes securely on the web.</p>
<p>Web security is inherently a deep topic that spans across both development and operations. As a result this chapter is rich with complex concepts and configurations. Fortunately, we will manage this complexity by learning through hands-on application.</p>
<p>We will learn the fundamentals of two <em>security protocols</em>: <strong>Oauth</strong> and <strong>OIDC</strong>. We will then learn how Azure can be used to implement them. We will spend a lot of time learning and configuring Azure Active Directory Business to Customer (<strong>AADB2C</strong>) which we will use to securely manage interactions between our applications and user accounts.</p>
<div class="section" id="key-concepts">
<h2>7.1.1. Key Concepts<a class="headerlink" href="#key-concepts" title="Permalink to this headline">¶</a></h2>
<p>This article will introduce the fundamental concepts used throughout this chapter. In the upcoming lessons we will build on these concepts in more practical settings.</p>
<p>There are many moving parts to keep track of and at times it may seem overwhelming. However, these concepts are worth learning as they are essential aspects of modern web development.</p>
<div class="admonition-note admonition">
<p class="first admonition-title"><i class="fas fa-sticky-note" aria-hidden="true"></i>note</p>
<p class="last">Keep in mind that the goal of this chapter is not to become an expert but to gain functional experience and proficiency in common web security terminology.</p>
</div>
<div class="section" id="authentication">
<h3>7.1.1.1. Authentication<a class="headerlink" href="#authentication" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><strong>Authentication</strong>: the process used by an entity to prove their identity</div></blockquote>
<p>Authentication is a process used in both the physical and digital world. We use the term entity in our context to describe anything on the web that proves its identity as part of interactions with a server.</p>
<p>An entity can be a an application user or even another server that interacts programmatically. Any entity can authenticate as long as it has a means of <em>uniquely identifying itself to a system</em>.</p>
<p>A common example of authentication would be logging into your email account. When you make a request to log in the email provider server doesn’t know who you are or what emails you are trying to access. This <em>interaction</em> begins with the email provider sending you a form to prove your identity.</p>
<p>You have to provide your <em>credentials</em>, an email address and a password, to prove your identity to your email provider before they <em>authorize you</em> to access your emails. This process of authenticating yourself is how trust is enabled in an anonymous digital space.</p>
<div class="section" id="authentication-factors">
<h4>7.1.1.1.1. Authentication Factors<a class="headerlink" href="#authentication-factors" title="Permalink to this headline">¶</a></h4>
<p>Authenticating using <em>something you know</em> like credentials is certainly the most common form of authentication. But there are actually <em>multiple factors of authentication</em> in the digital world that can be used:</p>
<blockquote>
<div><ul class="simple">
<li><strong>Knowledge factor</strong>: <em>something you know</em> (credentials like a username and password)</li>
<li><strong>Possession factor</strong>: <em>something you have</em> (<a class="reference external" href="https://www.ssl.com/faqs/what-is-an-x-509-certificate/" target="_blank">a digital certificate<i class="fas fa-external-link-alt" aria-hidden="true"></i></a>)</li>
<li><strong>Inherent factor</strong>: <em>something you are</em> (a fingerprint or facial topography)</li>
<li><strong>Location factor</strong>: <em>where you are</em> (geo-location coordinates)</li>
</ul>
</div></blockquote>
<div class="admonition-note admonition">
<p class="first admonition-title"><i class="fas fa-sticky-note" aria-hidden="true"></i>Note</p>
<p class="last">Digital interactions can be made more secure by requiring multiple factors of authentication. You can learn more about multi-factor authentication (<strong>MFA</strong>) from <a class="reference external" href="https://docs.microsoft.com/en-us/azure/active-directory/authentication/concept-mfa-howitworks" target="_blank">this Microsoft article<i class="fas fa-external-link-alt" aria-hidden="true"></i></a>.</p>
</div>
</div>
</div>
<div class="section" id="authorization">
<h3>7.1.1.2. Authorization<a class="headerlink" href="#authorization" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><strong>Authorization</strong>: the permission needed to access a protected resource</div></blockquote>
<p>Any physical or digital resource (data) can be protected by <em>restricting access</em> to it. Only entities that are <strong>authorized</strong> to access the resource are permitted to do so. In the context of digital authorization, <strong>access</strong> means any actions (like reading or writing) that can be taken on a resource.</p>
<p>Authorization can refer to a specific permission or to the overall process of verifying a permission. In the digital world an <strong>access control system</strong> defines rules (<strong>policies</strong>) for managing authorization. The policies are used for approving or denying access to a resource based on the authorization of the requestor.</p>
<div class="admonition-note admonition">
<p class="first admonition-title"><i class="fas fa-sticky-note" aria-hidden="true"></i>Note</p>
<p class="last">In most contexts it is understood that authorization is preceded by authentication. However, policies can also define how the resources in a system can be accessed by unauthenticated (<em>anonymous</em>) entities.</p>
</div>
<p>After an entity authenticates they are authorized to access certain resources based on the logical relationship between their identity and the resources. This type of authorization would use a policy that states the resources the <em>particular authenticated entity</em> is allowed to access.</p>
<div class="admonition-example admonition">
<p class="first admonition-title"><i class="fas fa-binoculars" aria-hidden="true"></i>Example</p>
<p>In the previous Secrets Management chapter we created a Key Vault and added a secret to it. However, we also <em>had to grant</em> our Virtual Machine <em>access</em> to the Key Vault.</p>
<p class="last">When granting access to the VM we had to <em>associated its identity</em> with scopes that defined what Key Vault resources it could access. In our case we <em>authorized the VM</em> to <code class="docutils literal notranslate"><span class="pre">get</span></code> and <code class="docutils literal notranslate"><span class="pre">list</span></code> secret resources managed by the Key Vault.</p>
</div>
<p>In the earlier example of checking your email your authorization was <em>implied</em> after authenticating. Because <em>you owned</em> the collection of emails (the resource) you were implicitly <em>authorized</em> to access them. Let’s label each element in this scenario:</p>
<blockquote>
<div><ul class="simple">
<li><strong>resource</strong>: your collection of emails</li>
<li><strong>consumer</strong>: you (the authenticated user)</li>
<li><strong>policy</strong>: authenticated users are <em>authorized to access</em> any collection of emails that they own</li>
</ul>
</div></blockquote>
<p>In more generalized terms we can refer to the core elements of authorization as:</p>
<blockquote>
<div><ul class="simple">
<li><strong>resource</strong>: the data to be accessed (an image, video or other application data)</li>
<li><strong>consumer</strong>: an entity that <em>tries to access</em> the resource</li>
<li><strong>policy</strong>: one or more rules that define the authorization needed to access the resource</li>
</ul>
</div></blockquote>
<div class="section" id="server-roles">
<h4>7.1.1.2.1. Server Roles<a class="headerlink" href="#server-roles" title="Permalink to this headline">¶</a></h4>
<p>On the web, a resource is managed by a <strong>resource server</strong> – like the email provider in the earlier example. In simple cases the logic to enforce policies can be written within the resource server itself. The resource server can take responsibility for both managing resources as well handling authorization.</p>
<div class="admonition-tip admonition">
<p class="first admonition-title"><i class="fas fa-lightbulb" aria-hidden="true"></i>Tip</p>
<p>We label the different servers to indicate their role in the system. Although they may sound fancy they are just an API <em>with a specialized purpose</em>.</p>
<p class="last">Our Coding Events API is an example of a resource server because it specializes in managing the resources related to coding events.</p>
</div>
<p>Later in this chapter we will use Azure AD B2C as another specialized API called an <strong>authorization server</strong> to protect our API from unauthorized requests. An authorization server separates some or all of the authorization responsibility from the resource server.</p>
<p>In either design, access to resources is controlled by applying logical policy rules based on:</p>
<blockquote>
<div><ul class="simple">
<li>the resource</li>
<li>the consumer’s identity</li>
<li>the consumer’s relationship with the resource</li>
<li>what access to the resource is being requested</li>
</ul>
</div></blockquote>
<p>Access control systems can define policies associated with other consumer attributes beyond just ownership. For example, there could be policies based on the consumer’s role in an organization or membership to a specific group.</p>
<div class="admonition-tip admonition">
<p class="first admonition-title"><i class="fas fa-lightbulb" aria-hidden="true"></i>Tip</p>
<p class="last">If the authorization server determines the consumer is <em>unauthorized to access the resource</em> then it will send back a <code class="docutils literal notranslate"><span class="pre">403</span> <span class="pre">Forbidden</span></code> response.</p>
</div>
</div>
</div>
<div class="section" id="delegation">
<h3>7.1.1.3. Delegation<a class="headerlink" href="#delegation" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><strong>Delegation</strong>: authorization for an entity to act on behalf of another</div></blockquote>
<p>When a third party needs access to a resource the <em>authorization to do so must be granted</em> from the owner of the resource to the external entity. We say the third party is external because it <em>neither owns nor manages</em> the resource. The only way for the external entity to access the resource is to do so <em>on behalf of</em> the owner.</p>
<p>Delegation is used when an application asks for the <strong>consent</strong> of a user (owner) to access a resource managed by another entity <em>on the owner’s behalf</em>.</p>
<p>We refer to these entities as:</p>
<blockquote>
<div><ul class="simple">
<li><strong>client</strong>: the <em>requesting entity</em> (the third party)</li>
<li><strong>resource owner</strong>: the <em>consenting entity</em> (a user)</li>
</ul>
</div></blockquote>
<div class="section" id="local-delegation">
<h4>7.1.1.3.1. Local Delegation<a class="headerlink" href="#local-delegation" title="Permalink to this headline">¶</a></h4>
<p>A common example of delegation between just these two entities is a desktop or mobile application requesting consent from a user to access some data on the device. For example, an application might request the photos <em>that are managed by</em> a user’s device. Notice how this delegation occurs <em>locally on the user’s device</em>.</p>
<p>Because the user (resource owner) is in control of the device that manage the photos (resource) they are <em>in direct control</em> of the resource itself. This contrasts with a <em>remote resource</em> on the web where a user controls resources <em>indirectly through the resource server</em>.</p>
</div>
<div class="section" id="remote-delegation">
<h4>7.1.1.3.2. Remote Delegation<a class="headerlink" href="#remote-delegation" title="Permalink to this headline">¶</a></h4>
<p>Remote delegation involves three entities: the resource owner (user), a resource manager that is separate from the owner and a client who needs to access the resource. Because the resource owner is <em>not in direct control of the resource</em> they need a mechanism for granting the client authorization to access the resource <em>on their behalf</em>.</p>
<div class="admonition-note admonition">
<p class="first admonition-title"><i class="fas fa-sticky-note" aria-hidden="true"></i>Note</p>
<p class="last">On the web we call the entity who manages the user’s data a <strong>resource server</strong> because it <em>serves to manage resources</em>. In more general terms the resource server can be referred to as a <strong>provider</strong> because it <em>provides data</em>. We will learn about several different types of providers in the upcoming lessons.</p>
</div>
<p>Consider the process of opening a new credit card. Your credit score is a resource that you <em>manage indirectly</em> through a credit agency. The credit card company is <em>not authorized</em> to access your credit score without <em>proof of your permission</em>. As the <em>owner of the credit score resource</em> you can choose to <em>delegate authorization</em> to the credit card company or deny their request.</p>
<p>You can <strong>grant permission</strong> for the credit agency to share your score by <em>consenting to</em> the credit card company’s request. The credit card company can then provide the physical or digital proof of your consent as a <em>token that authorizes them</em> to access your credit score. The credit agency accepts the token and authorizes the credit card company to access your data on your behalf.</p>
<p>Let’s consider the three entities involved in the delegation of your credit score <em>resource</em>:</p>
<blockquote>
<div><ul class="simple">
<li><strong>resource manager</strong>: the credit agency that manages your credit score resource</li>
<li><strong>client</strong>: the credit card company <em>requests authorization to access</em> your credit score</li>
<li><strong>resource owner</strong>: you choose to <em>delegate authorization</em> for the client to access your credit score</li>
</ul>
</div></blockquote>
<p>In more general terms we can describe the entities involved in this delegation as:</p>
<blockquote>
<div><ul class="simple">
<li><strong>resource manager</strong>: an entity that manages the owner’s data</li>
<li><strong>client</strong>: an entity that needs authorization to access an owner’s data</li>
<li><strong>resource owner</strong>: the entity that can authorize the resource manager to grant access to the client</li>
</ul>
</div></blockquote>
</div>
</div>
<div class="section" id="oauth-oidc">
<h3>7.1.1.4. OAuth &amp; OIDC<a class="headerlink" href="#oauth-oidc" title="Permalink to this headline">¶</a></h3>
<p>Delegation across these three entities on the web is slightly more complex due to the inherent anonymity. In order for the client to access the resources on behalf of the owner they need way to <em>assume the owner’s identity</em>. A resource owner could provide their credentials to the client so it can authenticate as the owner but that would be terribly insecure!</p>
<p>The industry standard that enables the <em>secure delegation of access</em> across a resource owner, client and resource server is the <strong>OAuth protocol</strong>.</p>
<div class="admonition-note admonition">
<p class="first admonition-title"><i class="fas fa-sticky-note" aria-hidden="true"></i>Note</p>
<p class="last">As mentioned previously the resource server can be, and often is, distinct from an authorization server that handles OAuth. Generally speaking we refer to the OAuth authorization server as an <strong>OAuth provider</strong> such as Microsoft, GitHub or LinkedIn.</p>
</div>
<p>In OAuth a user (resource owner) <strong>delegates authorization</strong> to a client through the use of a digital token. The client uses this <strong>access token</strong> to prove that they are authorized to access resources according to permissions granted by the user. If you have ever accepted a consent screen for a client service requesting access to your data on your behalf you were using OAuth!</p>
<div class="section" id="oidc">
<h4>7.1.1.4.1. OIDC<a class="headerlink" href="#oidc" title="Permalink to this headline">¶</a></h4>
<p>We will also explore another protocol called <strong>OIDC</strong> which is built over OAuth. Rather than delegating authorization, OIDC is used to <strong>delegate authentication</strong> through the use of an <strong>identity token</strong>. This is another mechanism you have likely used before which allowed you to sign in to one service using <em>your identity</em> that was managed by another service.</p>
<p>Rather than carrying proof of authorization for a client, an identity token <em>proves the identity</em> of the user (the owner of the account resource). In relatable terms, OIDC is what enables <a class="reference external" href="https://auth0.com/docs/api-auth/tutorials/adoption/single-sign-on" target="_blank">Single Sign On (SSO)<i class="fas fa-external-link-alt" aria-hidden="true"></i></a> on the web. SSO is what allows you to log in to many different client services using a single identity account.</p>
<div class="admonition-note admonition">
<p class="first admonition-title"><i class="fas fa-sticky-note" aria-hidden="true"></i>Note</p>
<p class="last">Because OIDC is built over OAuth the authorization server provides both access and identity tokens depending on the type of request it receives. When an authorization server is exchanging an identity token it is sometimes referred to as an <strong>identity provider</strong>.</p>
</div>
</div>
</div>
</div>
<div class="section" id="learn-more">
<h2>7.1.2. Learn More<a class="headerlink" href="#learn-more" title="Permalink to this headline">¶</a></h2>
<p>OAuth, OIDC and the Azure AD B2C service that we will use to implement them can be confusing to understand. While we will work with each of these in the upcoming lessons you can seek out other learning resources to help solidify your understanding. The following two videos offer a great overview and introduction to these protocols and AADB2C:</p>
<ul class="simple">
<li><a class="reference external" href="https://www.youtube.com/watch?v=996OiexHze0" target="_blank">OAuth &amp; OIDC explained simply by Nate Barbettini (YouTube)<i class="fas fa-external-link-alt" aria-hidden="true"></i></a></li>
<li><a class="reference external" href="https://www.youtube.com/watch?v=GmBKlXED9Ug" target="_blank">Microsoft AADB2C overview (YouTube)<i class="fas fa-external-link-alt" aria-hidden="true"></i></a></li>
</ul>
</div>
</div>



    
    <nav aria-label="Next and Previous Pages">
      <ul class="pager">
        
        <li class="previous"><a href="index.html"><span aria-hidden="true">&larr;</span> 7. Introduction to Authentication &amp; Authorization with Azure AD B2C</a></li>
        
        
        <li class="next"><a href="walkthrough_oauth-oidc.html">7.2. Walkthrough: Explore OAuth &amp; OIDC <span aria-hidden="true">&rarr;</span></a></li>
        
      </ul>
    </nav>
    
    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
    <p class="pull-right">
      <a href="#">Back to top</a>
      
        <br/>
        
<div id="sourcelink">
  <a href="../../_sources/chapters/intro-oauth-with-aadb2c/intro.rst.txt"
     rel="nofollow">Page Source</a>
</div>
      
    </p>
    <p>
    </p>
  </div>
</footer>
  </body>
</html>